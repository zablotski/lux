<!DOCTYPE html>

<html>
<head>
  <title>datagrid.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="cms.html">
                cms.js
              </a>
            
              
              <a class="source" href="datagrid.html">
                datagrid.js
              </a>
            
              
              <a class="source" href="lorem.html">
                lorem.js
              </a>
            
              
              <a class="source" href="lux-web.html">
                lux-web.js
              </a>
            
              
              <a class="source" href="lux.html">
                lux.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>datagrid.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>define([<span class="hljs-string">'lux'</span>], <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
<span class="hljs-pi">    "use strict"</span>;

    <span class="hljs-keyword">var</span> exports = lux;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h2 id="-datagridcolumn"> DataGridColumn</h2>
<p> A column in a <code>DataGrid</code>. It contains the <code>th</code> element and several
 important information about the column.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span></pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>    DataGridColumn = exports.DataGridColumn = lux.createView(<span class="hljs-string">'datagridcolumn'</span>, {
        jQuery: <span class="hljs-literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        tagName: <span class="hljs-string">'th'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        defaults: {
            resizable: <span class="hljs-literal">true</span>,
            sortable: <span class="hljs-literal">false</span>,
            focusable: <span class="hljs-literal">true</span>,
            selectable: <span class="hljs-literal">true</span>
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        initialise: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(options)</span> {</span>
            <span class="hljs-keyword">this</span>.options = options;
            <span class="hljs-keyword">this</span>.a = $(document.createElement(<span class="hljs-string">'a'</span>));
            <span class="hljs-keyword">this</span>.elem.empty().append(<span class="hljs-keyword">this</span>.a);</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (!options.code) {
                options.code = options.name;
            }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        id: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.code || <span class="hljs-keyword">this</span>.index();
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        label: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.name || <span class="hljs-keyword">this</span>.letter();
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Retrieve the <code>DataGrid</code> instance for this <code>DataGridColumn</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        datagrid: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> elem = <span class="hljs-keyword">this</span>.elem.closest(<span class="hljs-string">'.datagrid'</span>);
            <span class="hljs-keyword">return</span> elem.datagrid(<span class="hljs-string">'instance'</span>);
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        index: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.elem.index();
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        letter: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> lux.num_to_letter(<span class="hljs-keyword">this</span>.elem.index());
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> name = <span class="hljs-keyword">this</span>.options.name || <span class="hljs-keyword">this</span>.letter();
            <span class="hljs-keyword">this</span>.a.html(name);
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Data from input elements within this column</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        inputData: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
        }
    });

    <span class="hljs-keyword">var</span> DataGridRow = exports.DataGridColumn = lux.createView(<span class="hljs-string">'datagridrow'</span>, {
        jQuery: <span class="hljs-literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        tagName: <span class="hljs-string">'tr'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        initialise: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(options)</span> {</span>
            <span class="hljs-keyword">var</span> columns = options.datagrid ? options.datagrid.columns : <span class="hljs-literal">null</span>,
                model = <span class="hljs-keyword">this</span>.model;
            <span class="hljs-keyword">if</span> (columns) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j=<span class="hljs-number">0</span>; j&lt;columns.length; j++) {
                    <span class="hljs-keyword">var</span> col = columns[j],
                        cell = <span class="hljs-keyword">new</span> Cell({column: col, <span class="hljs-string">'model'</span>: model});
                    <span class="hljs-keyword">this</span>.elem.append(cell.elem);
                }
            }
        }
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <h2 id="-datagrid"> DATAGRID</h2>
<p> Requires <code>lux</code> and its dependencies (<code>jQuery</code> and <code>LoDash</code>).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> web = lux.web,
        TH = document.createElement(<span class="hljs-string">'th'</span>),
        TR = document.createElement(<span class="hljs-string">'tr'</span>),
        TD = document.createElement(<span class="hljs-string">'td'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>    TR.className = <span class="hljs-string">'row'</span>;

    <span class="hljs-keyword">var</span> Event = lux.Class.extend({</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        init: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(name, scope)</span> {</span>
            <span class="hljs-keyword">this</span>.name = name;
            <span class="hljs-keyword">this</span>.scope = scope;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        on: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(handler)</span> {</span>
            <span class="hljs-keyword">this</span>.scope.elem.bind(<span class="hljs-keyword">this</span>.name, handler);
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        one: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(handler)</span> {</span>
            <span class="hljs-keyword">this</span>.scope.elem.one(<span class="hljs-keyword">this</span>.name, handler);
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        fire: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(args)</span> {</span>
            <span class="hljs-keyword">var</span> e = $.Event(<span class="hljs-keyword">this</span>.name);
            args = args || [];
            args.splice(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-keyword">this</span>.scope);
            <span class="hljs-keyword">this</span>.scope.elem.trigger(e, args);
            <span class="hljs-keyword">return</span> e;
        }
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <h2 id="-datagrid"> DataGrid</h2>
<p>A class for data in rows and columns. Simple usage:</p>
<pre><code> $(<span class="hljs-string">'#example'</span>).datagrid({
     colHeaders: [<span class="hljs-string">'name'</span>,<span class="hljs-string">'surname'</span>,<span class="hljs-string">'place of Birth'</span>],
     data: [[<span class="hljs-string">'luca'</span>,<span class="hljs-string">'sbardella'</span>,<span class="hljs-string">'Adria'</span>],
            [<span class="hljs-string">'jo'</span>,<span class="hljs-string">'howes'</span>,<span class="hljs-string">'Halifax'</span>]]
 });
</code></pre><p><strong>Attributes</strong></p>
<ul>
<li><code>elem</code>, The outer <code>div</code> jQuery element containing the table.</li>
<li><code>columns</code>, list of <code>DataGridColumn</code></li>
<li><code>view</code>, the <code>DataGridView</code> instance for rending the grid on a page.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> DataGrid = exports.DataGrid = lux.createView(<span class="hljs-string">'datagrid'</span>, {</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Specify the selector for outloading</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        selector: <span class="hljs-string">'.datagrid'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Create a jQuery plugin with this view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        jQuery: <span class="hljs-literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>DataGrid extensions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        extensions: [],</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p><strong>AVAILABLE OPTIONS</strong></p>
<p>default options which can be overwritten duting initialisation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        defaults: {</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Auto load the grid as soon as it is ready</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            autoload: <span class="hljs-literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Optional model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            model: <span class="hljs-literal">null</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Optional store object or url</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            store: <span class="hljs-literal">null</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Minimum number of rows</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            minRows: <span class="hljs-number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Minimum number of columns</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            minColumns: <span class="hljs-number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Maximum number of rows</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            maxRows: <span class="hljs-literal">Infinity</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>Maximum number of columns</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            maxColumns: <span class="hljs-literal">Infinity</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Columns can be an integer indicating the number of columns
or an array of column labels, objects or DataGridColumn</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            columns: <span class="hljs-literal">null</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Can be a integer indicating the number of rows to render,
if provided it overrides minRows</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            rows: <span class="hljs-literal">null</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            rowHeaders: <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>Display table footer</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            foot: <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>Callback to execute when an error during loading of data occurs</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            onLoadError: <span class="hljs-literal">null</span>
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        classes: {
            container: <span class="hljs-string">'datagrid'</span>,
            header: <span class="hljs-string">'hd'</span>,
            top: <span class="hljs-string">'header'</span>,
            bottom: <span class="hljs-string">'footer'</span>
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>Initialise DataGrid</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        initialise: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(options)</span> {</span>
            <span class="hljs-keyword">var</span> container = <span class="hljs-keyword">this</span>.elem,
                classes = <span class="hljs-keyword">this</span>.classes;
            <span class="hljs-keyword">this</span>.options = options;
            <span class="hljs-keyword">if</span>(container.is(<span class="hljs-string">'table'</span>)) {
                container = $(document.createElement(<span class="hljs-string">'div'</span>));
                <span class="hljs-keyword">this</span>.elem.before(container);
                container.append(elem);
                <span class="hljs-keyword">this</span>.setElement(container);
            }
            container.addClass(classes.container);</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>create an id if one is not available</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (!container.attr(<span class="hljs-string">'id'</span>)) {
                container.attr(<span class="hljs-string">'id'</span>, <span class="hljs-keyword">this</span>.cid);
            }
            <span class="hljs-keyword">var</span> table = <span class="hljs-keyword">this</span>.table();
            <span class="hljs-keyword">if</span>(table.length === <span class="hljs-number">0</span>) {
                table = $(document.createElement(<span class="hljs-string">'table'</span>)).appendTo(container);
            }
            table.removeClass(classes.container);
            table.prepend(<span class="hljs-keyword">this</span>._addtag(<span class="hljs-string">'tbody'</span>));
            table.prepend(<span class="hljs-keyword">this</span>._addtag(<span class="hljs-string">'tfoot'</span>).addClass(<span class="hljs-string">'hd'</span>));
            <span class="hljs-keyword">if</span> (options.foot) {
                <span class="hljs-keyword">this</span>.show_tfoot();
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">this</span>.hide_tfoot();
            }
            table.prepend(<span class="hljs-keyword">this</span>._addtag(<span class="hljs-string">'thead'</span>).addClass(<span class="hljs-string">'hd'</span>));
            table.prepend(<span class="hljs-keyword">this</span>._addtag(<span class="hljs-string">'div.'</span> + classes.top).addClass(classes.top).hide());</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>Create the data from Html if not provided</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (!options.data) {
                options.data = _getHTML(<span class="hljs-keyword">this</span>);
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>Initialise headers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            _initHeaders(<span class="hljs-keyword">this</span>);
            <span class="hljs-keyword">if</span> (options.rowHeaders) {
                <span class="hljs-keyword">this</span>.show_row_headers();
            }
            <span class="hljs-keyword">if</span> (options.foot) {
                <span class="hljs-keyword">this</span>.show_tfoot();
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            self.onLoadError = options.onLoadError || <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>};</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (options.rows) {
                options.minRows = <span class="hljs-built_in">Math</span>.max(options.rows, <span class="hljs-number">0</span>);
            }
            <span class="hljs-keyword">delete</span> options.rows;</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            _register_events(<span class="hljs-keyword">this</span>);
            _add_extensions(<span class="hljs-keyword">this</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">this</span>.setData(options.data);
            <span class="hljs-keyword">delete</span> options.data;</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.onReady.fire().isDefaultPrevented()) {
                <span class="hljs-keyword">if</span> (options.autoload) {
                    <span class="hljs-keyword">this</span>.load({add: <span class="hljs-literal">true</span>});
                }
            }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p> Sets a new source for databinding and removes all rendered rows.</p>
<p> Note that this doesnâ€™t render the new rows - you can follow it with
 a call to render() to do that.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        setData: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(data)</span> {</span>
            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.data) {
                <span class="hljs-keyword">if</span> (!(data <span class="hljs-keyword">instanceof</span> lux.Collection)) {
                    <span class="hljs-keyword">var</span> o = <span class="hljs-keyword">this</span>.options;
                    data = <span class="hljs-keyword">new</span> lux.Collection(o.model, o.store);
                }
                <span class="hljs-keyword">this</span>.data = data;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">this</span>.data.reset(data);
            }
            <span class="hljs-keyword">this</span>.tbody().html(<span class="hljs-string">''</span>);
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>Load data via the datagrid store</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        load: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(options)</span> {</span>
            <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>,
                add = options.add;</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">this</span>.data.fetch({
                data: <span class="hljs-keyword">this</span>.inputData(),
                success: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(data)</span> {</span>
                    <span class="hljs-keyword">if</span> (add) {
                        self.data.add(data);
                    } <span class="hljs-keyword">else</span> {
                        self.setData(data);
                    }
                    self.render();
                },
                error: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(exc)</span> {</span>
                    self.onLoadError(exc);
                }
            });
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>The Html id, always available.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        id: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.elem.attr(<span class="hljs-string">'id'</span>);
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>The jQuery <code>table</code> element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        table: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.elem.find(<span class="hljs-string">'table'</span>);
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>The jQuery <code>thead</code> element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        thead: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.elem.find(<span class="hljs-string">'thead'</span>);
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>The jQuery <code>tbody</code> element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        tbody: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.elem.find(<span class="hljs-string">'tbody'</span>);
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>The jQuery <code>tfoot</code> element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        tfoot: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.elem.find(<span class="hljs-string">'tfoot'</span>);
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>The <code>thead tr</code> jQuery element containing the table column headers.
The element has the <code>headers</code> HTML class.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        headers: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> heads = <span class="hljs-keyword">this</span>.thead().children(<span class="hljs-string">'tr'</span>);
            <span class="hljs-keyword">if</span> (!heads.length) {
                heads = $(document.createElement(<span class="hljs-string">'tr'</span>)).appendTo(<span class="hljs-keyword">this</span>.thead());
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (heads.length &gt; <span class="hljs-number">1</span>) {
                <span class="hljs-keyword">var</span> h = <span class="hljs-keyword">this</span>.thead().children(<span class="hljs-string">'tr.headers'</span>);
                heads = h.length ? h : heads.first();
            }
            <span class="hljs-keyword">return</span> heads.addClass(<span class="hljs-string">'headers'</span>);
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>Retrieve a column of this datagrid.
<code>elem</code> can be either an HTML element or an id (string).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        column: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(elem)</span> {</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(elem) === <span class="hljs-string">'string'</span>) {
                elem = th = <span class="hljs-keyword">this</span>.thead().find(<span class="hljs-string">'#'</span> + elem);
            } <span class="hljs-keyword">else</span> {
                elem = $(elem);
            }
            <span class="hljs-keyword">return</span> elem.closest(<span class="hljs-string">'th'</span>).datagridcolumn(<span class="hljs-string">'instance'</span>);
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        insertColumn: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(col, position)</span> {</span>
            <span class="hljs-keyword">var</span> tr = <span class="hljs-keyword">this</span>.head().find(<span class="hljs-string">'tr.headers'</span>);
            <span class="hljs-keyword">if</span> (position === <span class="hljs-literal">undefined</span> &amp;&amp; position &gt;= tr[<span class="hljs-number">0</span>].children.length) {
                <span class="hljs-keyword">this</span>.head().append(col);
            } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>Gather all input data in the datagrid</p>
<p>Return an object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        inputData: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>,
                data = {<span class="hljs-string">'field'</span>: <span class="hljs-keyword">this</span>.fields()};
            _(self.extensions).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(ext)</span> {</span>
                ext.inputData(self, data);
            });
            <span class="hljs-keyword">return</span> data;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p> The number of rows</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        countRows: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.data.length;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>Retrieve the value of a cell</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        getDataAtCell: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(row, col)</span> {</span>
            <span class="hljs-keyword">if</span> (row &gt;=<span class="hljs-number">0</span> &amp;&amp; row &lt; <span class="hljs-keyword">this</span>.data.length) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.data[row][col];
            }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>Show row headers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        show_row_headers: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> head = <span class="hljs-keyword">this</span>.thead(),
                th = head.find(<span class="hljs-string">'th.row-header'</span>);
            <span class="hljs-keyword">if</span> (!th.length) {
                <span class="hljs-keyword">var</span> rows = head.children(<span class="hljs-string">'tr'</span>);
                th = $(document.createElement(<span class="hljs-string">'th'</span>)).addClass(<span class="hljs-string">'row-header'</span>);
                <span class="hljs-keyword">if</span> (len(rows.length) &gt; <span class="hljs-number">1</span>) {
                    th.attr(<span class="hljs-string">'rowspan'</span>, rows);
                }
                rows.first().append(th);
            }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>Show the table footer</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        show_tfoot: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> footer = <span class="hljs-keyword">this</span>.tfoot().children(<span class="hljs-string">'tr'</span>);
            <span class="hljs-keyword">if</span> (!footer.length) {
                footer = $(document.createElement(<span class="hljs-string">'tr'</span>)).appendTo(<span class="hljs-keyword">this</span>.tfoot());
                _(<span class="hljs-keyword">this</span>.columns).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(col)</span> {</span>
                    footer.append(<span class="hljs-string">'&lt;td&gt;'</span> + col.name + <span class="hljs-string">'&lt;/td&gt;'</span>);
                });
            }
            <span class="hljs-keyword">this</span>.elem.addClass(<span class="hljs-string">'footer'</span>);
            <span class="hljs-keyword">this</span>.tfoot().show();
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        hide_tfoot: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">this</span>.elem.removeClass(<span class="hljs-string">'footer'</span>);
            <span class="hljs-keyword">this</span>.tfoot().hide();
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        toggle_tfoot: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.elem.hasClass(<span class="hljs-string">'footer'</span>)) {
                <span class="hljs-keyword">this</span>.hide_tfoot();
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">this</span>.show_tfoot();
            }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        _addtag: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(tag)</span> {</span>
            <span class="hljs-keyword">var</span> elem = <span class="hljs-keyword">this</span>.elem.find(tag);
            <span class="hljs-keyword">if</span> (!elem.length) {
                tag = tag.split(<span class="hljs-string">'.'</span>)[<span class="hljs-number">0</span>];
                elem = $(document.createElement(tag));
            }
            <span class="hljs-keyword">return</span> elem;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>A list of column codes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        fields: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> fields = [];
            _(<span class="hljs-keyword">this</span>.columns).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(col)</span> {</span>
                <span class="hljs-keyword">var</span> data = col.inputData();
                <span class="hljs-keyword">if</span> (data) {
                    fields.push(data);
                }
            });
            <span class="hljs-keyword">return</span> fields;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>Rendering</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> body = <span class="hljs-keyword">this</span>.tbody()[<span class="hljs-number">0</span>],
                maxRows = <span class="hljs-keyword">this</span>.options.maxRows,
                minRows = <span class="hljs-keyword">this</span>.options.minRows,
                columns = <span class="hljs-keyword">this</span>.columns,
                data = <span class="hljs-keyword">this</span>.data,
                self = <span class="hljs-keyword">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            _(<span class="hljs-keyword">this</span>.columns).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(col)</span> {</span>
                col.render();
            });</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (data.length &lt; minRows) {
                <span class="hljs-keyword">var</span> extra = [],
                    empty = {};
                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=data.length; i&lt;minRows; i++) {
                    extra.push(empty);
                }
                data.add(extra);
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            data.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model, r)</span> {</span>
                <span class="hljs-keyword">if</span> (r &gt;= maxRows) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">var</span> row = <span class="hljs-keyword">new</span> DataGridRow({
                    <span class="hljs-string">'model'</span>: model,
                    datagrid: self
                });
                body.appendChild(row.elem[<span class="hljs-number">0</span>]);
            });
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        toString: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> <span class="hljs-string">'DataGrid - '</span> + <span class="hljs-keyword">this</span>.data.toString();
        }
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>Base class for Datagrid Extension classes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> DataGridExtension = lux.Class.extend({</pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        inputData: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(g, data)</span> {</span>}
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-78">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <p>Add a new extension to the Datagrid class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    DataGrid.Extension = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(name, attrs)</span> {</span>
        attrs.name = name;
        DataGrid.prototype.extensions.push(DataGridExtension.extend(attrs));
    };


    <span class="hljs-keyword">var</span> Cell = exports.Cell = lux.createView(<span class="hljs-string">'datagridcell'</span>, {
        tagName: <span class="hljs-string">"td"</span>,

        initialise: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(options)</span> {</span>
            <span class="hljs-keyword">var</span> model = <span class="hljs-keyword">this</span>.model;
            <span class="hljs-keyword">this</span>.column = options.column;
            <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">this</span>.column <span class="hljs-keyword">instanceof</span> DataGridColumn)) {
                <span class="hljs-keyword">this</span>.column = <span class="hljs-keyword">new</span> DataGridColumn(<span class="hljs-keyword">this</span>.column);
            }
            <span class="hljs-keyword">if</span> (model) {
                <span class="hljs-keyword">var</span> value = model.get(<span class="hljs-keyword">this</span>.column.id());
                <span class="hljs-keyword">if</span> (value)
                    <span class="hljs-keyword">this</span>.elem.html(value);
            }
        },

        exitEditMode: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">this</span>.elem.removeClass(<span class="hljs-string">"error"</span>);
            <span class="hljs-keyword">this</span>.currentEditor.remove();
            <span class="hljs-keyword">this</span>.stopListening(<span class="hljs-keyword">this</span>.currentEditor);
            <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.currentEditor;
            <span class="hljs-keyword">this</span>.elem.removeClass(<span class="hljs-string">"editor"</span>);
            <span class="hljs-keyword">this</span>.render();
        }

    });</pre></div></div>
            
        </li>
        
        
        <li id="section-79">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <p>Perform client side column sorting</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    DataGrid.Extension(<span class="hljs-string">'sorting'</span>, {</pre></div></div>
            
        </li>
        
        
        <li id="section-80">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        defaults: {
            sortable: <span class="hljs-literal">false</span>,
            sorting_icon: <span class="hljs-string">'sort'</span>,
            sorting_asc_icon: <span class="hljs-string">'sort-down'</span>,
            sorting_desc_icon: <span class="hljs-string">'sort-up'</span>
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-81">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        classes: {
            enabled: <span class="hljs-string">'sortable'</span>,
            sorted: <span class="hljs-string">'sorted'</span>
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-82">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        sort_string: {
            asc: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(a, b)</span> {</span>
                a = (a + <span class="hljs-string">''</span>).toLowerCase();
                b = (b + <span class="hljs-string">''</span>).toLowerCase();
                <span class="hljs-keyword">return</span> ((a &lt; b) ? -<span class="hljs-number">1</span> : ((a &gt; b) ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>));
            },
            desc: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(a, b)</span> {</span>
                a = (a + <span class="hljs-string">''</span>).toLowerCase();
                b = (b + <span class="hljs-string">''</span>).toLowerCase();
                <span class="hljs-keyword">return</span> ((a &lt; b) ? <span class="hljs-number">1</span> : ((a &gt; b) ? -<span class="hljs-number">1</span> : <span class="hljs-number">0</span>));
            }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-83">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        sort_number: {
            is: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(a)</span> {</span>
                <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span>(a) !== <span class="hljs-string">'number'</span>) {
                    <span class="hljs-keyword">return</span> !<span class="hljs-built_in">isNaN</span>(a*<span class="hljs-number">1</span>);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                }
            },
            asc: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(a, b)</span> {</span>
                a = (a===<span class="hljs-string">"-"</span> || a===<span class="hljs-string">""</span>) ? <span class="hljs-number">0</span> : a*<span class="hljs-number">1</span>;
                b = (b===<span class="hljs-string">"-"</span> || b===<span class="hljs-string">""</span>) ? <span class="hljs-number">0</span> : b*<span class="hljs-number">1</span>;
                <span class="hljs-keyword">return</span> a - b;
            },
            desc:  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(a, b)</span> {</span>
                a = (a===<span class="hljs-string">"-"</span> || a===<span class="hljs-string">""</span>) ? <span class="hljs-number">0</span> : a*<span class="hljs-number">1</span>;
                b = (b===<span class="hljs-string">"-"</span> || b===<span class="hljs-string">""</span>) ? <span class="hljs-number">0</span> : b*<span class="hljs-number">1</span>;
                <span class="hljs-keyword">return</span> b - a;
            }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-84">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        init: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(g)</span> {</span>
            <span class="hljs-keyword">if</span> (g.options.sortable) {
                <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-85">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p>Inject sort method</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                g.sort = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(col, acending)</span> {</span>
                    self.sort(g, col, acending);
                };</pre></div></div>
            
        </li>
        
        
        <li id="section-86">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>                self._enable_sorting(g);</pre></div></div>
            
        </li>
        
        
        <li id="section-87">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>                g.elem.on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'th'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
                    <span class="hljs-keyword">var</span> col = g.column(e.currentTarget);
                    <span class="hljs-keyword">if</span>(col &amp;&amp; col.sorting !== <span class="hljs-literal">false</span>) {
                        self.sort(g, col);
                    }
                });
            }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-88">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <p>Client side sorting</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        sort: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(g, col)</span> {</span>
            <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>,
                type = col.data_type,
                index = col.index(),
                classes = <span class="hljs-keyword">this</span>.classes,
                rows = [],
                sorter,
                gtype,
                gtype2,
                val;
            <span class="hljs-keyword">if</span> (g.options.rowHeaders) {
                index--;
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-89">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (g.sortColumn === col) {
                g.sortOrder = g.sortOrder === <span class="hljs-string">'asc'</span> ? <span class="hljs-string">'desc'</span>: <span class="hljs-string">'asc'</span>;
            }
            <span class="hljs-keyword">else</span> {
              g.sortColumn = col;
              g.sortOrder = col.direction ? col.direction : <span class="hljs-string">'asc'</span>;
            }
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i &lt; g.countRows(); i++) {
                val = g.getDataAtCell(i, index);
                rows.push([i, val]);
                <span class="hljs-keyword">if</span> (!type) {
                    gtype2 = self._guessType(val);
                    <span class="hljs-keyword">if</span> (gtype2 === <span class="hljs-string">'string'</span>) {
                        type = <span class="hljs-string">'string'</span>;
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (gtype === <span class="hljs-literal">undefined</span>) {
                        gtype = gtype2;
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (gtype !== gtype2) {
                        type = <span class="hljs-string">'string'</span>;
                    }
                }
            }
            <span class="hljs-keyword">if</span> (!type) {
                type = gtype;
            }
            col.data_type = type;
            <span class="hljs-keyword">if</span> (type) {</pre></div></div>
            
        </li>
        
        
        <li id="section-90">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              <p>pick up sorter</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                sorter = <span class="hljs-keyword">this</span>[<span class="hljs-string">'sort_'</span> + type][g.sortOrder];
                rows.sort(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(a, b)</span> {</span>
                    <span class="hljs-keyword">return</span> sorter(a[<span class="hljs-number">1</span>], b[<span class="hljs-number">1</span>]);
                });
                <span class="hljs-keyword">var</span> data = [];
                _(rows).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> {</span>
                    data.push(g.data[value[<span class="hljs-number">0</span>]]);
                });
                g.data = data;
                _(g.columns).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(column)</span> {</span>
                    <span class="hljs-keyword">if</span> (column !== col) {
                        self.set_icon(column, g.options.sorting_icon);
                    }
                });
                self.set_icon(column, g.options[<span class="hljs-string">'sorting_'</span> + g.sortOrder + <span class="hljs-string">'_icon'</span>]);
                g.render();
            }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-91">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              <p>Enable Sorting</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _enable_sorting: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(g)</span> {</span>
            <span class="hljs-keyword">var</span> classes = <span class="hljs-keyword">this</span>.classes,
                thead = g.thead(),
                self = <span class="hljs-keyword">this</span>;
            _(g.columns).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(col)</span> {</span>
                <span class="hljs-keyword">if</span> (col.sortable === <span class="hljs-literal">false</span>) {
                    col.elem.removeClass(classes.enabled);
                } <span class="hljs-keyword">else</span> {
                    col.elem.addClass(classes.enabled);
                    self.set_icon(col, g.options.sorting_icon);
                }
            });
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-92">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <p>guess type</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _guessType: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> {</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.sort_number.is(value)) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">'number'</span>;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-string">'string'</span>;
            }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-93">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        set_icon: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(col, icon)</span> {</span>
            <span class="hljs-keyword">if</span> (icon) {
                <span class="hljs-keyword">var</span> a = col.elem.find(<span class="hljs-string">'.sortable-toggle'</span>);
                <span class="hljs-keyword">if</span> (!a.length) a = ($(document.createElement(<span class="hljs-string">'a'</span>))
                    ).addClass(<span class="hljs-string">'sortable-toggle'</span>).appendTo(col.elem);
                lux.icon(a, {<span class="hljs-string">'icon'</span>: icon});
            }
        }
    });

    <span class="hljs-keyword">var</span> CheckboxColumn = DataGridColumn.extend({

    });</pre></div></div>
            
        </li>
        
        
        <li id="section-94">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              <p>Add a checkbox column as the first column in the datagrid</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    DataGrid.Extension(<span class="hljs-string">'checkboxSelector'</span>, {</pre></div></div>
            
        </li>
        
        
        <li id="section-95">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        defaults: {
            checkbox_selector: <span class="hljs-literal">false</span>
        },

        init: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(g)</span> {</span>
            <span class="hljs-keyword">if</span> (g.options.checkbox_selector &amp;&amp; g.options.colHeaders) {
                g.options.colHeaders.splice(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-keyword">new</span> CheckboxColumn());
            }
        }
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-96">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>
              <p>Add a checkbox column as the first column in the datagrid</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    DataGrid.Extension(<span class="hljs-string">'RowActions'</span>, {</pre></div></div>
            
        </li>
        
        
        <li id="section-97">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-97">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        defaults: {
            row_actions: []
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-98">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-98">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        init: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(g)</span> {</span>
            <span class="hljs-keyword">var</span> o = g.options;
            <span class="hljs-keyword">if</span> (o.colHeaders &amp;&amp; o.row_actions &amp;&amp; o.row_actions.length) {
                <span class="hljs-keyword">if</span> (!o.checkbox_selector) {
                    o.checkbox_selector = <span class="hljs-literal">true</span>;
                    o.colHeaders.splice(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-keyword">new</span> CheckboxColumn());
                }
            }
        }
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-99">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-99">&#182;</a>
              </div>
              <p>Perform client side column sorting</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    DataGrid.Extension(<span class="hljs-string">'skin'</span>, {</pre></div></div>
            
        </li>
        
        
        <li id="section-100">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-100">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        defaults: {
            styles: {
                <span class="hljs-string">'plain'</span>: <span class="hljs-string">''</span>,
                <span class="hljs-string">'table'</span>: <span class="hljs-string">'table'</span>,
                <span class="hljs-string">'grid'</span>: <span class="hljs-string">'grid'</span>
            },</pre></div></div>
            
        </li>
        
        
        <li id="section-101">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-101">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            style: <span class="hljs-string">'table'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-102">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-102">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            skin: <span class="hljs-string">'default'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-103">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-103">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            rowHeight: <span class="hljs-number">20</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-104">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-104">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            minWidth: <span class="hljs-number">30</span>,
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-105">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-105">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        init: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(g)</span> {</span>
            <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-106">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-106">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            g.style = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(name)</span> {</span>
                self.style(g, name);
            };</pre></div></div>
            
        </li>
        
        
        <li id="section-107">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-107">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            g.setSkin(g.options.skin);</pre></div></div>
            
        </li>
        
        
        <li id="section-108">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-108">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            g.style(g.options.style);</pre></div></div>
            
        </li>
        
        
        <li id="section-109">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-109">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (g.options.rowHeight)
                <span class="hljs-keyword">this</span>._createCssRules(g);
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-110">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-110">&#182;</a>
              </div>
              <p>Set the style of the table</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        style: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(g, name)</span> {</span>
            <span class="hljs-keyword">if</span> (g.options.styles[name] !== <span class="hljs-literal">undefined</span>) {
                _(g.options.styles).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(cn)</span> {</span>
                    g.elem.removeClass(cn);
                });
                g.elem.addClass(g.options.styles[name]);
            }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-111">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-111">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        _createCssRules: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(g)</span> {</span>
            <span class="hljs-keyword">var</span> cellHeightDiff = <span class="hljs-number">0</span>,
                uid = g.elem[<span class="hljs-number">0</span>].id,
                rowHeight = (g.options.rowHeight - cellHeightDiff),
                rules = [
                    <span class="hljs-string">"#"</span> + uid + <span class="hljs-string">" .row { height:"</span> + g.options.rowHeight + <span class="hljs-string">"px; }"</span>,
                    <span class="hljs-string">"#"</span> + uid + <span class="hljs-string">" .row &gt; td { height:"</span> + rowHeight + <span class="hljs-string">"px; }"</span>
                  ];
                <span class="hljs-keyword">if</span> (g.options.minWidth) {
                    rules.push(<span class="hljs-string">'#'</span> + uid + <span class="hljs-string">" .row &gt; th { min-width:"</span> + g.options.minWidth + <span class="hljs-string">"px; }"</span>);
                }
            g.addStyle(rules);
        }
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-112">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-112">&#182;</a>
              </div>
              <h2 id="-datagrid-responsive"> Datagrid Responsive</h2>
<p> Tables that work responsively on small devices. To enable it set
 the <code>responsive</code> options value to <code>true</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    DataGrid.Extension(<span class="hljs-string">'responsive'</span>, {</pre></div></div>
            
        </li>
        
        
        <li id="section-113">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-113">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        init: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(g)</span> {</span>
            <span class="hljs-keyword">if</span> (g.options.responsive) {
                <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
                <span class="hljs-keyword">this</span>.switched = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">this</span>._render = g.render;
                g.render = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
                    self.render(g);
                };
                $(window).on(<span class="hljs-string">"resize"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
                    self.render(g);
                });
            }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-114">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-114">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(g)</span> {</span>
            <span class="hljs-keyword">var</span> width = $(window).width();
            <span class="hljs-keyword">if</span> (width &lt; <span class="hljs-number">767</span> &amp;&amp; !<span class="hljs-keyword">this</span>.switched) {
                <span class="hljs-keyword">this</span>.switched = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">var</span> body = g.tbody();
                _(g.columns).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(col, index)</span> {</span>
                    index += <span class="hljs-number">1</span>;
                    body.find(<span class="hljs-string">'td:nth-of-type('</span>+index+<span class="hljs-string">')'</span>).attr(
                                <span class="hljs-string">'data-content'</span>, col.name);
                });
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (width &gt;= <span class="hljs-number">767</span> &amp;&amp; <span class="hljs-keyword">this</span>.switched) {
                <span class="hljs-keyword">this</span>.switched = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">this</span>._render.call(g);
            }
        }
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-115">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-115">&#182;</a>
              </div>
              <h2 id="internal-methods">Internal methods</h2>

            </div>
            
        </li>
        
        
        <li id="section-116">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-116">&#182;</a>
              </div>
              <p>Internal functions used by DataGrid</p>
<p>Initialise table data from HTML</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span>

    _getHTML = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(self)</span> {</span>
        <span class="hljs-keyword">var</span> heads = self.thead().children(<span class="hljs-string">'tr'</span>),
            data = [];
        <span class="hljs-keyword">if</span> (heads.length) {
            <span class="hljs-keyword">var</span> h = <span class="hljs-keyword">this</span>.thead().children(<span class="hljs-string">'tr.headers'</span>);
            heads = h.length ? h : heads.last();
            heads.children(<span class="hljs-string">'th'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
                self.columns.push(<span class="hljs-keyword">new</span> DataGridColumn(<span class="hljs-keyword">this</span>));
            });
        }
        self.tbody().children(<span class="hljs-string">'tr'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> row = {};
            $(<span class="hljs-keyword">this</span>).children().each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
                <span class="hljs-keyword">if</span> (data.length &lt;= length) {
                    data.push(<span class="hljs-keyword">this</span>.innerHTML);
                }
            });
            data.push(row);
        });
        <span class="hljs-keyword">return</span> data;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-117">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-117">&#182;</a>
              </div>
              <p>Initialise headers when supplied in the options object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _initHeaders = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(self)</span> {</span>
        <span class="hljs-keyword">var</span> columns = [],
            tr = TR.cloneNode(<span class="hljs-literal">false</span>),
            options = self.options,
            cols = options.columns;</pre></div></div>
            
        </li>
        
        
        <li id="section-118">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-118">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>        self.columns = columns;
        <span class="hljs-keyword">if</span> (_.isNumber(cols)) {
            <span class="hljs-keyword">var</span> num = <span class="hljs-built_in">parseInt</span>(cols, <span class="hljs-number">10</span>);
            cols = [];
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;num; i++) {
                cols.push(<span class="hljs-keyword">new</span> DataGridColumn());
            }
        }
        _(cols).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(column)</span> {</span>
            <span class="hljs-keyword">if</span> (!(column <span class="hljs-keyword">instanceof</span> DataGridColumn)) {
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(column) === <span class="hljs-string">'string'</span>) {
                    column = {name: column};
                }
                column = <span class="hljs-keyword">new</span> DataGridColumn(column);
            }
            tr.appendChild(column.elem[<span class="hljs-number">0</span>]);
            columns.push(column);
        });
        self.thead().append($(tr));
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-119">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-119">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>    _add_extensions = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(self)</span> {</span>
        <span class="hljs-keyword">var</span> extensions = self.extensions,
            options = self.options;
        self.extensions = {};
        _(extensions).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(Extension)</span> {</span>
            _(Extension.prototype.defaults).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value, name)</span> {</span>
                <span class="hljs-keyword">if</span> (!(name <span class="hljs-keyword">in</span> options)) {
                    options[name] = value;
                }
            });
            self.extensions[Extension.prototype.name] = <span class="hljs-keyword">new</span> Extension(self);
        });
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-120">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-120">&#182;</a>
              </div>
              <p>Register events to this instance,
called during initialisation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _register_events = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(self)</span> {</span>
        _.extend(self, {
            onReady: <span class="hljs-keyword">new</span> Event(<span class="hljs-string">'ready'</span>, self),
            onScroll: <span class="hljs-keyword">new</span> Event(<span class="hljs-string">'scroll'</span>, self),
            onSort: <span class="hljs-keyword">new</span> Event(<span class="hljs-string">'sort'</span>, self),</pre></div></div>
            
        </li>
        
        
        <li id="section-121">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-121">&#182;</a>
              </div>
              <p>Fired when on a click event</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            onClick: <span class="hljs-keyword">new</span> Event(<span class="hljs-string">'click'</span>, self),</pre></div></div>
            
        </li>
        
        
        <li id="section-122">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-122">&#182;</a>
              </div>
              <p>Fired when a new column is added to the datagrid</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            onColumn: <span class="hljs-keyword">new</span> Event(<span class="hljs-string">'column'</span>, self)
        });
    };


    <span class="hljs-keyword">return</span> DataGrid;
});</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
