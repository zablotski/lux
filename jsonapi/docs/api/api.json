{"modified": "2014-11-11T16:21:08", "content_type": "text/html", "site": {"lux_version": "0.1.1-alpha.1", "template_engine": null, "year": 2014, "url": "http://quantmind.github.io/lux", "python_version": "3.4.2", "media": "/media", "date": "2014-11-11T17-40-20", "name": "Lux", "template": "doc.html"}, "html_url": "http://quantmind.github.io/lux/docs/api/api", "head": {}, "name": "api_api", "slug": "api/api", "api_url": "http://quantmind.github.io/lux/jsonapi/docs/api/api", "html": {"main": "<section id=\"page-header\" class=\"page-header-outer api_api-header\">\n    <div class=\"layer\">\n        <div class=\"page-header\">\n            <div class=\"container fullpage\">\n                <div class=\"row fullpage\">\n                    <div class=\"col-sm-12 text-center\">\n                        <breadcrumbs></breadcrumbs>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</section>\n\n<div id=\"page-main\">\n    <div class=\"container\">\n        <div class=\"row\">\n            <div class=\"api_api-main col-md-12\">\n                <div class=\"center-block\" style=\"max-width: 900px\" data-highlight data-hash-scroll>\n                    <div class=\"section\" id=\"module-lux.extensions.api\">\n<span id=\"restful-web-api\"></span><span id=\"extension-api\"></span><h1>RESTful web API<a class=\"headerlink\" href=\"#module-lux.extensions.api\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>A <a class=\"reference internal\" href=\"../tutorials/extensions#writing-extensions\"><em>lux extension</em></a> for managing data models and\nRESTful web API.</p>\n<div class=\"section\" id=\"usage\">\n<h2>Usage<a class=\"headerlink\" href=\"#usage\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Add <tt class=\"docutils literal\"><span class=\"pre\">lux.extensions.api</span></tt> to the list of <a class=\"reference internal\" href=\"params#std:setting-EXTENSIONS\"><tt class=\"xref std std-setting docutils literal\"><span class=\"pre\">EXTENSIONS</span></tt></a>\nof your application:</p>\n<div class=\"highlight-python\"><div class=\"highlight\"><pre>EXTENSIONS = [...,\n              &#39;lux.extensions.api&#39;,\n              ...]\n\nAPI_URL = &#39;/api/&#39;\n</pre></div>\n</div>\n<p>If <a class=\"reference internal\" href=\"params#std:setting-API_URL\"><tt class=\"xref std std-setting docutils literal\"><span class=\"pre\">API_URL</span></tt></a> is defined, the extension creates a WSGI\nmiddleware which can be used for serving the restful api.\nThe middleware is available as the <tt class=\"docutils literal\"><span class=\"pre\">api</span></tt> attribute of the\n<a class=\"reference internal\" href=\"core#lux.core.app.Application\" title=\"lux.core.app.Application\"><tt class=\"xref py py-class docutils literal\"><span class=\"pre\">Application</span></tt></a> but it is not added to the list of middlewares.</p>\n<p>The middleware collects <tt class=\"xref py py-class docutils literal\"><span class=\"pre\">Crud</span></tt> routers\nfrom all <a class=\"reference internal\" href=\"core#lux.core.extension.Extension\" title=\"lux.core.extension.Extension\"><tt class=\"xref py py-class docutils literal\"><span class=\"pre\">Extension</span></tt></a> providing the <tt class=\"docutils literal\"><span class=\"pre\">api_sections</span></tt> method.</p>\n<div class=\"section\" id=\"adding-handlers\">\n<h3>Adding Handlers<a class=\"headerlink\" href=\"#adding-handlers\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>To add API handlers for a model, or group of models, one starts by creating\na new <a class=\"reference internal\" href=\"core#lux.core.extension.Extension\" title=\"lux.core.extension.Extension\"><tt class=\"xref py py-class docutils literal\"><span class=\"pre\">Extension</span></tt></a> and implement the <tt class=\"xref py py-meth docutils literal\"><span class=\"pre\">api_sections()</span></tt>\nmethod:</p>\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"kn\">import</span> <span class=\"nn\">lux</span>\n<span class=\"kn\">from</span> <span class=\"nn\">lux.extensions.api</span> <span class=\"kn\">import</span> <span class=\"n\">Crud</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">BlogExtension</span><span class=\"p\">(</span><span class=\"n\">lux</span><span class=\"o\">.</span><span class=\"n\">Extension</span><span class=\"p\">):</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">api_sections</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">app</span><span class=\"p\">):</span>\n        <span class=\"k\">yield</span> <span class=\"s\">&#39;Blog&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"n\">Crud</span><span class=\"p\">(</span><span class=\"s\">&#39;blog&#39;</span><span class=\"p\">,</span> <span class=\"n\">Blog</span><span class=\"p\">)]</span>\n</pre></div>\n</div>\n<p>The <tt class=\"docutils literal\"><span class=\"pre\">api_sections</span></tt> method returns an iterable over two-elements tuples.\nThe first element in the tuple is a string representing the name of a Section\nin the <tt class=\"docutils literal\"><span class=\"pre\">Api</span></tt> documentation. The second element is an iterable\nover <tt class=\"xref py py-class docutils literal\"><span class=\"pre\">Crud</span></tt> routers which handles requests.\nThe Routers will be appended to the <tt class=\"xref py py-class docutils literal\"><span class=\"pre\">Api</span></tt> Router.</p>\n<p>The example above adds one single <tt class=\"xref py py-class docutils literal\"><span class=\"pre\">Crud</span></tt> router to the <tt class=\"xref py py-class docutils literal\"><span class=\"pre\">Api</span></tt>\nrouter. The router serves requests at the <tt class=\"docutils literal\"><span class=\"pre\">/api/blog/</span></tt> url.</p>\n<dl class=\"class\">\n<dt id=\"lux.extensions.api.ApiRoot\">\n<em class=\"property\">class </em><tt class=\"descclassname\">lux.extensions.api.</tt><tt class=\"descname\">ApiRoot</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class=\"reference internal\" href=\"../modules/lux/extensions/api#ApiRoot\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#lux.extensions.api.ApiRoot\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Api Root</p>\n</dd></dl>\n\n</div>\n</div>\n</div>\n\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class='small hidden-print text-muted' id='page-footer'>\n    <div class='container'>\n        <div class='row'>\n            <div class='block col-sm-5'>\n                <div class='hidden-xs'>\n                    <ul class=\"fa-ul text-left\">\n    <li><i class=\"fa-li fa fa-copyright\"></i>2014 <a href=\"http://quantmind.com\">Quantmind</a></li>\n    <li>Site build with Lux on python 3.4.2</li>\n    <li>Docs build with <a href=\"http://sphinx-doc.org/\" target=\"_blank\">Sphinx</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/changelog\">Changelog</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/api/\">API</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/EXTENSIONS/\">Extensions</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/images\">Images</a></li>\n</ul>\n                </div>\n                <div class='text-center visible-xs'>\n                    <ul class=\"fa-ul text-left\">\n    <li><i class=\"fa-li fa fa-copyright\"></i>2014 <a href=\"http://quantmind.com\">Quantmind</a></li>\n    <li>Site build with Lux on python 3.4.2</li>\n    <li>Docs build with <a href=\"http://sphinx-doc.org/\" target=\"_blank\">Sphinx</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/changelog\">Changelog</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/api/\">API</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/EXTENSIONS/\">Extensions</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/images\">Images</a></li>\n</ul>\n                </div>\n            </div>\n            <div class='block col-sm-2 text-center'>\n                <div class='hidden-xs'>\n                    <p><a href='#top' title=\"Lux\" class=\"hover-opacity\">\n    <img height=50 title='Lux' src='http://quantmind.github.io/lux/media/luxsite/lux.png' alt='Lux'>\n</a></p>\n                </div>\n                <div class='visible-xs'>\n                    <p><a href='https://twitter.com/quantmind' title='Follow quantmind on twitter'>\n<i class='fa fa-twitter fa-2x'></i></a>\n<a href='https://plus.google.com/+QuantmindPlus' title='Follow quantmind on google+'>\n<i class='fa fa-google-plus-square fa-2x'></i></a>\n<a href='https://www.facebook.com/quantmind' title='Follow quantmind on facebook'>\n<i class='fa fa-facebook-square fa-2x'></i></a>\n<a href='https://github.com/quantmind/lux' title='Lux on github'>\n<i class='fa fa-github fa-2x'></i></a></p>\n                </div>\n            </div>\n            <div class='block col-sm-5'>\n                <div class='text-right hidden-xs'>\n                    <p><a href='https://twitter.com/quantmind' title='Follow quantmind on twitter'>\n<i class='fa fa-twitter fa-2x'></i></a>\n<a href='https://plus.google.com/+QuantmindPlus' title='Follow quantmind on google+'>\n<i class='fa fa-google-plus-square fa-2x'></i></a>\n<a href='https://www.facebook.com/quantmind' title='Follow quantmind on facebook'>\n<i class='fa fa-facebook-square fa-2x'></i></a>\n<a href='https://github.com/quantmind/lux' title='Lux on github'>\n<i class='fa fa-github fa-2x'></i></a></p>\n                </div>\n                <div class='text-center visible-xs'>\n                    <p><a href='#top' title=\"Lux\" class=\"hover-opacity\">\n    <img height=50 title='Lux' src='http://quantmind.github.io/lux/media/luxsite/lux.png' alt='Lux'>\n</a></p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>"}}