{"head": {}, "modified": "2014-01-31T20:31:51", "site": {"lux_version": "0.1.1-alpha.1", "python_version": "3.4.1", "date": "2014-10-22T13-18-21", "media": "/media", "template_engine": null, "name": "Lux", "year": 2014, "url": "http://quantmind.github.io/lux", "template": "doc.html"}, "api_url": "http://quantmind.github.io/lux/jsonapi/docs/api/api", "slug": "api/api", "name": "api_api", "html_url": "http://quantmind.github.io/lux/docs/api/api", "content_type": "text/html", "html": {"main": "<section id=\"page-header\" class=\"page-header-outer api_api-header\">\n    <div class=\"layer\">\n        <div class=\"page-header\">\n            <div class=\"container fullpage\">\n                <div class=\"row fullpage\">\n                    <div class=\"col-sm-12 text-center\">\n                        <breadcrumbs></breadcrumbs>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</section>\n\n<div id=\"page-main\">\n    <div class=\"container\">\n        <div class=\"row\">\n            <div class=\"api_api-main col-md-12\">\n                <div class=\"center-block\" style=\"max-width: 900px\" data-highlight data-hash-scroll>\n                    <div class=\"section\" id=\"module-lux.extensions.api\">\n<span id=\"restful-web-api\"></span><span id=\"extension-api\"></span><h1>RESTful web API<a class=\"headerlink\" href=\"#module-lux.extensions.api\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>A <em class=\"xref std std-ref\">lux extension</em> for managing data models and\nRESTful web API.\nTo use it, simply add it to the list of <em class=\"xref std std-ref\">EXTENSIONS</em>\nof your application:</p>\n<div class=\"highlight-python\"><div class=\"highlight\"><pre>EXTENSIONS = [...,\n              &#39;lux.extensions.api&#39;,\n              ...]\n</pre></div>\n</div>\n<p><a class=\"reference internal\" href=\"params#std:setting-DATASTORE\"><tt class=\"xref std std-setting docutils literal\"><span class=\"pre\">DATASTORE</span></tt></a> is the most important <a class=\"reference internal\" href=\"core#lux.core.extension.Parameter\" title=\"lux.core.extension.Parameter\"><tt class=\"xref py py-class docutils literal\"><span class=\"pre\">Parameter</span></tt></a> of\nthis extension. It defines a dictionary for mapping\nmodels to backend data-stores.</p>\n<p>If <a class=\"reference internal\" href=\"params#std:setting-API_URL\"><tt class=\"xref std std-setting docutils literal\"><span class=\"pre\">API_URL</span></tt></a> is defined, the extension include a middleware for\nserving the restful api url. The middleware collects <tt class=\"xref py py-class docutils literal\"><span class=\"pre\">Crud</span></tt> routers\nfrom all extensions which provides the <tt class=\"docutils literal\"><span class=\"pre\">api_sections</span></tt> method.</p>\n<div class=\"section\" id=\"usage\">\n<h2>Usage<a class=\"headerlink\" href=\"#usage\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>The base url for the web API is defined by the <a class=\"reference internal\" href=\"params#std:setting-API_URL\"><tt class=\"xref std std-setting docutils literal\"><span class=\"pre\">API_URL</span></tt></a> setting.</p>\n<div class=\"section\" id=\"adding-handlers\">\n<h3>Adding Handlers<a class=\"headerlink\" href=\"#adding-handlers\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>To add API handlers for a model, or group of models, one starts by creating\na new <em class=\"xref std std-ref\">lux Extension</em> and implement the <tt class=\"xref py py-meth docutils literal\"><span class=\"pre\">api_sections()</span></tt>\nmethod:</p>\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"kn\">import</span> <span class=\"nn\">lux</span>\n<span class=\"kn\">from</span> <span class=\"nn\">lux.extensions.api</span> <span class=\"kn\">import</span> <span class=\"n\">Crud</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">BlogExtension</span><span class=\"p\">(</span><span class=\"n\">lux</span><span class=\"o\">.</span><span class=\"n\">Extension</span><span class=\"p\">):</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">api_sections</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">app</span><span class=\"p\">):</span>\n        <span class=\"k\">yield</span> <span class=\"s\">&#39;Blog&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"n\">Crud</span><span class=\"p\">(</span><span class=\"s\">&#39;blog&#39;</span><span class=\"p\">,</span> <span class=\"n\">Blog</span><span class=\"p\">)]</span>\n</pre></div>\n</div>\n<p>The <tt class=\"docutils literal\"><span class=\"pre\">api_sections</span></tt> method returns an iterable over two-elements tuples.\nThe first element in the tuple is a string representing the name of a Section\nin the <tt class=\"docutils literal\"><span class=\"pre\">Api</span></tt> documentation. The second element is an iterable\nover <tt class=\"xref py py-class docutils literal\"><span class=\"pre\">Crud</span></tt> routers which handles requests.\nThe Routers will be appended to the <tt class=\"xref py py-class docutils literal\"><span class=\"pre\">Api</span></tt> Router.</p>\n<p>The example above adds one single <tt class=\"xref py py-class docutils literal\"><span class=\"pre\">Crud</span></tt> router to the <tt class=\"xref py py-class docutils literal\"><span class=\"pre\">Api</span></tt>\nrouter. The router serves requests at the <tt class=\"docutils literal\"><span class=\"pre\">/api/blog/</span></tt> url.</p>\n</div>\n</div>\n<div class=\"section\" id=\"object-data-mapper\">\n<h2>Object Data Mapper<a class=\"headerlink\" href=\"#object-data-mapper\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>The object data mapper must provide the following:</p>\n<ul class=\"simple\">\n<li><tt class=\"docutils literal\"><span class=\"pre\">Mapper</span></tt> class for managing models</li>\n<li><tt class=\"docutils literal\"><span class=\"pre\">search_engine</span></tt> to create a full text search engine handler</li>\n</ul>\n<p>The mapper object must expose the following methods:</p>\n<ul class=\"simple\">\n<li><tt class=\"docutils literal\"><span class=\"pre\">register_applications</span></tt></li>\n</ul>\n</div>\n<div class=\"section\" id=\"api\">\n<h2>API<a class=\"headerlink\" href=\"#api\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<div class=\"section\" id=\"api-extension\">\n<h3>API Extension<a class=\"headerlink\" href=\"#api-extension\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<dl class=\"class\">\n<dt id=\"lux.extensions.api.Extension\">\n<em class=\"property\">class </em><tt class=\"descclassname\">lux.extensions.api.</tt><tt class=\"descname\">Extension</tt><a class=\"reference internal\" href=\"../modules/lux/extensions/api#Extension\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#lux.extensions.api.Extension\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>A RESTful API <em class=\"xref std std-ref\">lux extension</em>.</p>\n<dl class=\"attribute\">\n<dt id=\"lux.extensions.api.Extension.html_crud_routers\">\n<tt class=\"descname\">html_crud_routers</tt><a class=\"headerlink\" href=\"#lux.extensions.api.Extension.html_crud_routers\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Dictionary of Routers serving a models for Html requests</p>\n</dd></dl>\n\n<dl class=\"attribute\">\n<dt id=\"lux.extensions.api.Extension.api_crud_routers\">\n<tt class=\"descname\">api_crud_routers</tt><a class=\"headerlink\" href=\"#lux.extensions.api.Extension.api_crud_routers\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Dictionary of Routers serving a model for Api requests</p>\n</dd></dl>\n\n<dl class=\"method\">\n<dt id=\"lux.extensions.api.Extension.middleware\">\n<tt class=\"descname\">middleware</tt><big>(</big><em>app</em><big>)</big><a class=\"reference internal\" href=\"../modules/lux/extensions/api#Extension.middleware\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#lux.extensions.api.Extension.middleware\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Build the API middleware.</p>\n<p>If <a class=\"reference internal\" href=\"params#std:setting-API_URL\"><tt class=\"xref std std-setting docutils literal\"><span class=\"pre\">API_URL</span></tt></a> is defined, it loops through all extensions\nand checks if the <tt class=\"docutils literal\"><span class=\"pre\">api_sections</span></tt> method is available.</p>\n</dd></dl>\n\n<dl class=\"method\">\n<dt id=\"lux.extensions.api.Extension.on_config\">\n<tt class=\"descname\">on_config</tt><big>(</big><em>app</em><big>)</big><a class=\"reference internal\" href=\"../modules/lux/extensions/api#Extension.on_config\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#lux.extensions.api.Extension.on_config\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Create a pulsar mapper with all models registered.</p>\n</dd></dl>\n\n</dd></dl>\n\n</div>\n<div class=\"section\" id=\"api-router\">\n<h3>API Router<a class=\"headerlink\" href=\"#api-router\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<span class=\"target\" id=\"module-lux.extensions.api.content\"><span id=\"crud-content-manager\"></span></span></div>\n<div class=\"section\" id=\"crud-contentmanager\">\n<h3>CRUD ContentManager<a class=\"headerlink\" href=\"#crud-contentmanager\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<span class=\"target\" id=\"module-lux.extensions.api.crud\"><span id=\"crud-router\"></span></span></div>\n<div class=\"section\" id=\"id1\">\n<h3>CRUD Router<a class=\"headerlink\" href=\"#id1\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<span class=\"target\" id=\"module-lux.extensions.api.websocket\"><span id=\"crud-websocket\"></span></span></div>\n<div class=\"section\" id=\"id2\">\n<h3>CRUD Websocket<a class=\"headerlink\" href=\"#id2\" title=\"Permalink to this headline\">\u00b6</a></h3>\n</div>\n<div class=\"section\" id=\"crud-message\">\n<span id=\"id3\"></span><h3>CRUD message<a class=\"headerlink\" href=\"#crud-message\" title=\"Permalink to this headline\">\u00b6</a></h3>\n</div>\n</div>\n</div>\n\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class='small hidden-print text-muted' id='page-footer'>\n    <div class='container'>\n        <div class='row'>\n            <div class='block col-sm-5'>\n                <div class='hidden-xs'>\n                    <ul class=\"fa-ul text-left\">\n    <li><i class=\"fa-li fa fa-copyright\"></i>2014 <a href=\"http://quantmind.com\">Quantmind</a></li>\n    <li>Site build with Lux on python 3.4.1</li>\n    <li>Docs build with <a href=\"http://sphinx-doc.org/\" target=\"_blank\">Sphinx</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/changelog\">Changelog</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/api/\">API</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/EXTENSIONS/\">Extensions</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/images\">Images</a></li>\n</ul>\n                </div>\n                <div class='text-center visible-xs'>\n                    <ul class=\"fa-ul text-left\">\n    <li><i class=\"fa-li fa fa-copyright\"></i>2014 <a href=\"http://quantmind.com\">Quantmind</a></li>\n    <li>Site build with Lux on python 3.4.1</li>\n    <li>Docs build with <a href=\"http://sphinx-doc.org/\" target=\"_blank\">Sphinx</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/changelog\">Changelog</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/api/\">API</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/EXTENSIONS/\">Extensions</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/images\">Images</a></li>\n</ul>\n                </div>\n            </div>\n            <div class='block col-sm-2 text-center'>\n                <div class='hidden-xs'>\n                    <p><a href='#top' title=\"Lux\" class=\"hover-opacity\">\n    <img height=50 title='Lux' src='http://quantmind.github.io/lux/media/luxsite/lux.png' alt='Lux'>\n</a></p>\n                </div>\n                <div class='visible-xs'>\n                    <p><a href='https://twitter.com/quantmind' title='Follow quantmind on twitter'>\n<i class='fa fa-twitter fa-2x'></i></a>\n<a href='https://plus.google.com/+QuantmindPlus' title='Follow quantmind on google+'>\n<i class='fa fa-google-plus-square fa-2x'></i></a>\n<a href='https://www.facebook.com/quantmind' title='Follow quantmind on facebook'>\n<i class='fa fa-facebook-square fa-2x'></i></a>\n<a href='https://github.com/quantmind/lux' title='Lux on github'>\n<i class='fa fa-github fa-2x'></i></a></p>\n                </div>\n            </div>\n            <div class='block col-sm-5'>\n                <div class='text-right hidden-xs'>\n                    <p><a href='https://twitter.com/quantmind' title='Follow quantmind on twitter'>\n<i class='fa fa-twitter fa-2x'></i></a>\n<a href='https://plus.google.com/+QuantmindPlus' title='Follow quantmind on google+'>\n<i class='fa fa-google-plus-square fa-2x'></i></a>\n<a href='https://www.facebook.com/quantmind' title='Follow quantmind on facebook'>\n<i class='fa fa-facebook-square fa-2x'></i></a>\n<a href='https://github.com/quantmind/lux' title='Lux on github'>\n<i class='fa fa-github fa-2x'></i></a></p>\n                </div>\n                <div class='text-center visible-xs'>\n                    <p><a href='#top' title=\"Lux\" class=\"hover-opacity\">\n    <img height=50 title='Lux' src='http://quantmind.github.io/lux/media/luxsite/lux.png' alt='Lux'>\n</a></p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>"}}