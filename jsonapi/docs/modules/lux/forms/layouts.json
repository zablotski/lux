{"modified": "2014-10-14T10:49:04", "content_type": "text/html", "slug": "modules/lux/forms/layouts", "name": "modules_lux_forms_layouts", "html": {"main": "<section id=\"page-header\" class=\"page-header-outer modules_lux_forms_layouts-header\">\n    <div class=\"layer\">\n        <div class=\"page-header\">\n            <div class=\"container fullpage\">\n                <div class=\"row fullpage\">\n                    <div class=\"col-sm-12 text-center\">\n                        <breadcrumbs></breadcrumbs>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</section>\n\n<div id=\"page-main\">\n    <div class=\"container\">\n        <div class=\"row\">\n            <div class=\"modules_lux_forms_layouts-main col-md-12\">\n                <div class=\"center-block\" style=\"max-width: 900px\" data-highlight data-hash-scroll>\n                    <h1>Source code for lux.forms.layouts</h1><div class=\"highlight\"><pre>\n<span class=\"sd\">&#39;&#39;&#39;</span>\n<span class=\"sd\">Layout</span>\n<span class=\"sd\">~~~~~~~~~~~~~~~~~~~</span>\n\n<span class=\"sd\">.. autoclass:: Layout</span>\n<span class=\"sd\">   :members:</span>\n<span class=\"sd\">   :member-order: bysource</span>\n\n<span class=\"sd\">Layout style</span>\n<span class=\"sd\">~~~~~~~~~~~~~~~~~~~</span>\n\n<span class=\"sd\">.. autoclass:: LayoutStyle</span>\n<span class=\"sd\">   :members:</span>\n<span class=\"sd\">   :member-order: bysource</span>\n\n<span class=\"sd\">Registering layouts</span>\n<span class=\"sd\">~~~~~~~~~~~~~~~~~~~~~~~~</span>\n\n<span class=\"sd\">.. autofunction:: register_layout_style</span>\n<span class=\"sd\">&#39;&#39;&#39;</span>\n<span class=\"kn\">from</span> <span class=\"nn\">inspect</span> <span class=\"kn\">import</span> <span class=\"n\">isclass</span>\n<span class=\"kn\">from</span> <span class=\"nn\">functools</span> <span class=\"kn\">import</span> <span class=\"n\">partial</span><span class=\"p\">,</span> <span class=\"nb\">reduce</span>\n\n<span class=\"kn\">import</span> <span class=\"nn\">lux</span>\n<span class=\"kn\">from</span> <span class=\"nn\">lux</span> <span class=\"kn\">import</span> <span class=\"n\">Html</span><span class=\"p\">,</span> <span class=\"n\">Template</span>\n\n\n<span class=\"n\">__all__</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s\">&#39;Layout&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;Fieldset&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;register_layout_style&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;LayoutStyle&#39;</span><span class=\"p\">,</span>\n           <span class=\"s\">&#39;Row&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;Group&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;Submit&#39;</span><span class=\"p\">]</span>\n\n\n<span class=\"n\">special_types</span> <span class=\"o\">=</span> <span class=\"nb\">set</span><span class=\"p\">((</span><span class=\"s\">&#39;checkbox&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;radio&#39;</span><span class=\"p\">))</span>\n<span class=\"n\">control_group</span> <span class=\"o\">=</span> <span class=\"s\">&#39;form-group&#39;</span>\n<span class=\"n\">control_class</span> <span class=\"o\">=</span> <span class=\"s\">&#39;form-control&#39;</span>\n<span class=\"n\">LAYOUT_HANDLERS</span> <span class=\"o\">=</span> <span class=\"p\">{}</span>\n<span class=\"n\">FORMKEY</span> <span class=\"o\">=</span> <span class=\"s\">&#39;m__form&#39;</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">check_fields</span><span class=\"p\">(</span><span class=\"n\">fields</span><span class=\"p\">,</span> <span class=\"n\">missings</span><span class=\"p\">,</span> <span class=\"n\">parent</span><span class=\"p\">,</span> <span class=\"n\">Default</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">):</span>\n    <span class=\"sd\">&#39;&#39;&#39;Utility function for checking fields in layouts&#39;&#39;&#39;</span>\n    <span class=\"k\">for</span> <span class=\"n\">field</span> <span class=\"ow\">in</span> <span class=\"n\">fields</span><span class=\"p\">:</span>\n        <span class=\"k\">if</span> <span class=\"n\">field</span> <span class=\"ow\">in</span> <span class=\"n\">missings</span><span class=\"p\">:</span>\n            <span class=\"n\">field</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">Default</span> <span class=\"ow\">or</span> <span class=\"n\">Group</span><span class=\"p\">)(</span><span class=\"n\">field</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">field</span><span class=\"p\">,</span> <span class=\"n\">FieldTemplate</span><span class=\"p\">):</span>\n            <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">check_fields</span><span class=\"p\">(</span><span class=\"n\">missings</span><span class=\"p\">,</span> <span class=\"n\">parent</span><span class=\"p\">)</span>\n            <span class=\"k\">yield</span> <span class=\"n\">field</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">FieldTemplate</span><span class=\"p\">(</span><span class=\"n\">Template</span><span class=\"p\">):</span>\n    <span class=\"sd\">&#39;&#39;&#39;A :class:`.Template` for fields or group of fields in</span>\n<span class=\"sd\">    a :class:`.Form`&#39;&#39;&#39;</span>\n    <span class=\"n\">parent</span> <span class=\"o\">=</span> <span class=\"bp\">None</span>\n\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">layout</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">parent</span><span class=\"p\">:</span>\n            <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">parent</span><span class=\"o\">.</span><span class=\"n\">layout</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">check_fields</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">missings</span><span class=\"p\">,</span> <span class=\"n\">parent</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">parent</span> <span class=\"o\">=</span> <span class=\"n\">parent</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">setup</span><span class=\"p\">(</span><span class=\"n\">missings</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">setup</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">missings</span><span class=\"p\">):</span>\n        <span class=\"k\">raise</span> <span class=\"ne\">NotImplementedError</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">Group</span><span class=\"p\">(</span><span class=\"n\">FieldTemplate</span><span class=\"p\">):</span>\n    <span class=\"sd\">&#39;&#39;&#39;A group is a container of a field and its label&#39;&#39;&#39;</span>\n    <span class=\"n\">tag</span> <span class=\"o\">=</span> <span class=\"s\">&#39;div&#39;</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">setup</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">missings</span><span class=\"p\">):</span>\n        <span class=\"k\">assert</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">children</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"mi\">1</span>\n        <span class=\"n\">missings</span><span class=\"o\">.</span><span class=\"n\">remove</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">children</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">])</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">key</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">children</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">__repr__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">key</span>\n    <span class=\"n\">__str__</span> <span class=\"o\">=</span> <span class=\"n\">__repr__</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">required_message</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">field</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"s\">&#39;</span><span class=\"si\">%s</span><span class=\"s\"> is required&#39;</span> <span class=\"o\">%</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">name</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">error_message</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">field</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"s\">&#39;</span><span class=\"si\">%s</span><span class=\"s\"> is invalid&#39;</span> <span class=\"o\">%</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">label</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">post_process_child</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">html</span><span class=\"p\">,</span> <span class=\"n\">child</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;Return an iterable over Html objects or strings.&#39;&#39;&#39;</span>\n        <span class=\"k\">if</span> <span class=\"n\">context</span><span class=\"p\">:</span>\n            <span class=\"n\">form</span> <span class=\"o\">=</span> <span class=\"n\">context</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s\">&#39;form&#39;</span><span class=\"p\">)</span>\n            <span class=\"n\">layout</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">layout</span>\n            <span class=\"k\">if</span> <span class=\"n\">form</span><span class=\"p\">:</span>\n                <span class=\"n\">field</span> <span class=\"o\">=</span> <span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">dfields</span><span class=\"p\">[</span><span class=\"n\">child</span><span class=\"p\">]</span>\n                <span class=\"n\">w</span> <span class=\"o\">=</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">widget</span><span class=\"p\">()</span>\n                <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">w</span><span class=\"o\">.</span><span class=\"n\">attr</span><span class=\"p\">(</span><span class=\"s\">&#39;type&#39;</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"s\">&#39;hidden&#39;</span> <span class=\"ow\">or</span>\n                    <span class=\"n\">w</span><span class=\"o\">.</span><span class=\"n\">css</span><span class=\"p\">(</span><span class=\"s\">&#39;display&#39;</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"s\">&#39;none&#39;</span><span class=\"p\">):</span>\n                    <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">addClass</span><span class=\"p\">(</span><span class=\"s\">&#39;hidden&#39;</span><span class=\"p\">)</span>\n\n                <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">layout</span><span class=\"p\">:</span>\n                    <span class=\"k\">return</span> <span class=\"n\">w</span>\n\n                <span class=\"c\"># ng-model</span>\n                <span class=\"k\">if</span> <span class=\"n\">layout</span><span class=\"o\">.</span><span class=\"n\">ngmodel</span><span class=\"p\">:</span>\n                    <span class=\"n\">w</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"p\">({</span><span class=\"s\">&#39;ng-model&#39;</span><span class=\"p\">:</span> <span class=\"s\">&#39;formModel.</span><span class=\"si\">%s</span><span class=\"s\">&#39;</span> <span class=\"o\">%</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">,</span>\n                            <span class=\"s\">&#39;watch-change&#39;</span><span class=\"p\">:</span> <span class=\"s\">&quot;checkField(&#39;</span><span class=\"si\">%s</span><span class=\"s\">&#39;)&quot;</span> <span class=\"o\">%</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">,</span>\n                            <span class=\"s\">&#39;lux-input&#39;</span><span class=\"p\">:</span> <span class=\"s\">&#39;&#39;</span><span class=\"p\">})</span>\n                    <span class=\"c\">#if field.value:</span>\n                    <span class=\"c\">#    w.attr(&#39;ng-init&#39;, &quot;formModel.%s=&#39;%s&#39;&quot; %</span>\n                    <span class=\"c\">#           (field.name, field.value))</span>\n                    <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">attr</span><span class=\"p\">(</span><span class=\"s\">&#39;ng-class&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;formClasses.</span><span class=\"si\">%s</span><span class=\"s\">&#39;</span> <span class=\"o\">%</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">)</span>\n\n                <span class=\"c\"># styling</span>\n                <span class=\"n\">layout</span><span class=\"o\">.</span><span class=\"n\">style</span><span class=\"p\">(</span><span class=\"n\">html</span><span class=\"p\">,</span> <span class=\"n\">w</span><span class=\"p\">,</span> <span class=\"n\">field</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">Submit</span><span class=\"p\">(</span><span class=\"n\">FieldTemplate</span><span class=\"p\">):</span>\n    <span class=\"n\">tag</span> <span class=\"o\">=</span> <span class=\"s\">&#39;button&#39;</span>\n    <span class=\"n\">classes</span> <span class=\"o\">=</span> <span class=\"s\">&#39;btn btn-default&#39;</span>\n    <span class=\"n\">defaults</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s\">&#39;type&#39;</span><span class=\"p\">:</span> <span class=\"s\">&#39;submit&#39;</span><span class=\"p\">}</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">setup</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">missings</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">children</span><span class=\"p\">:</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">children</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"s\">&#39;submit&#39;</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">Row</span><span class=\"p\">(</span><span class=\"n\">FieldTemplate</span><span class=\"p\">):</span>\n    <span class=\"n\">tag</span> <span class=\"o\">=</span> <span class=\"s\">&#39;div&#39;</span>\n    <span class=\"n\">classes</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"s\">&#39;form-group&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;row&#39;</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">setup</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">missings</span><span class=\"p\">):</span>\n        <span class=\"n\">children</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n        <span class=\"n\">spans</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n        <span class=\"n\">num</span> <span class=\"o\">=</span> <span class=\"mi\">12</span><span class=\"o\">/</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">children</span><span class=\"p\">)</span>\n        <span class=\"k\">for</span> <span class=\"n\">field</span> <span class=\"ow\">in</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">children</span><span class=\"p\">:</span>\n            <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">field</span><span class=\"p\">,</span> <span class=\"nb\">tuple</span><span class=\"p\">):</span>\n                <span class=\"n\">field</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">field</span><span class=\"p\">,</span> <span class=\"s\">&#39;sm-</span><span class=\"si\">%d</span><span class=\"s\">&#39;</span> <span class=\"o\">%</span> <span class=\"n\">num</span><span class=\"p\">)</span>\n            <span class=\"n\">children</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">field</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">])</span>\n            <span class=\"n\">spans</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">field</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">])</span>\n        <span class=\"c\">#</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">children</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n        <span class=\"n\">fields</span> <span class=\"o\">=</span> <span class=\"n\">check_fields</span><span class=\"p\">(</span><span class=\"n\">children</span><span class=\"p\">,</span> <span class=\"n\">missings</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"p\">)</span>\n        <span class=\"k\">for</span> <span class=\"n\">field</span><span class=\"p\">,</span> <span class=\"n\">sp</span> <span class=\"ow\">in</span> <span class=\"nb\">zip</span><span class=\"p\">(</span><span class=\"n\">fields</span><span class=\"p\">,</span> <span class=\"n\">spans</span><span class=\"p\">):</span>\n            <span class=\"n\">div</span> <span class=\"o\">=</span> <span class=\"n\">Template</span><span class=\"p\">(</span><span class=\"n\">field</span><span class=\"p\">,</span> <span class=\"n\">tag</span><span class=\"o\">=</span><span class=\"s\">&#39;div&#39;</span><span class=\"p\">,</span> <span class=\"n\">cn</span><span class=\"o\">=</span><span class=\"s\">&#39;col-</span><span class=\"si\">%s</span><span class=\"s\">&#39;</span> <span class=\"o\">%</span> <span class=\"n\">sp</span><span class=\"p\">)</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">children</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">div</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">Fieldset</span><span class=\"p\">(</span><span class=\"n\">FieldTemplate</span><span class=\"p\">):</span>\n    <span class=\"sd\">&#39;&#39;&#39;A :class:`BaseFormLayout` class for :class:`FormLayout`</span>\n<span class=\"sd\">    components. An instance of this class render one or several</span>\n<span class=\"sd\">    :class:`Field` of a form.</span>\n<span class=\"sd\">    &#39;&#39;&#39;</span>\n    <span class=\"n\">tag</span> <span class=\"o\">=</span> <span class=\"s\">&#39;fieldset&#39;</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">init_parameters</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">legend</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">params</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">legend</span> <span class=\"o\">=</span> <span class=\"n\">legend</span>\n        <span class=\"nb\">super</span><span class=\"p\">(</span><span class=\"n\">Fieldset</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">init_parameters</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">params</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">setup</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">missings</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;Check if the specified fields are available in the form and</span>\n<span class=\"sd\">        remove available fields from the *missings* set.</span>\n<span class=\"sd\">        &#39;&#39;&#39;</span>\n        <span class=\"n\">children</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">children</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">children</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">legend</span><span class=\"p\">:</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">children</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">Template</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">legend</span><span class=\"p\">,</span> <span class=\"n\">tag</span><span class=\"o\">=</span><span class=\"s\">&#39;legend&#39;</span><span class=\"p\">))</span>\n        <span class=\"k\">for</span> <span class=\"n\">field</span> <span class=\"ow\">in</span> <span class=\"n\">check_fields</span><span class=\"p\">(</span><span class=\"n\">children</span><span class=\"p\">,</span> <span class=\"n\">missings</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">Group</span><span class=\"p\">):</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">children</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">field</span><span class=\"p\">)</span>\n\n\n<div class=\"viewcode-block\" id=\"Layout\"><a class=\"viewcode-back\" href=\"../../../api/forms#lux.forms.layouts.Layout\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">Layout</span><span class=\"p\">(</span><span class=\"n\">Template</span><span class=\"p\">):</span>\n    <span class=\"sd\">&#39;&#39;&#39;A :class:`Layout` renders the form into HTML.</span>\n\n<span class=\"sd\">    :param style: Optional style name.</span>\n<span class=\"sd\">        A style handler must be registered via the</span>\n<span class=\"sd\">        :func:`register_layout_style` function. It sets the :attr:style:</span>\n<span class=\"sd\">        attribute</span>\n\n<span class=\"sd\">    .. attribute:: style</span>\n\n<span class=\"sd\">        The name of the :class:`LayoutStyle` for this :class:`Layout`.</span>\n\n<span class=\"sd\">    .. attribute:: ngmodel</span>\n\n<span class=\"sd\">        If ``True``, render the form so that it can be managed by angular.</span>\n<span class=\"sd\">    &#39;&#39;&#39;</span>\n    <span class=\"n\">tag</span> <span class=\"o\">=</span> <span class=\"s\">&#39;form&#39;</span>\n    <span class=\"n\">default_element</span> <span class=\"o\">=</span> <span class=\"n\">Fieldset</span>\n    <span class=\"n\">form_class</span> <span class=\"o\">=</span> <span class=\"bp\">None</span>\n    <span class=\"n\">controller</span> <span class=\"o\">=</span> <span class=\"bp\">None</span>\n    <span class=\"n\">defaults</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s\">&#39;role&#39;</span><span class=\"p\">:</span> <span class=\"s\">&#39;form&#39;</span><span class=\"p\">}</span>\n\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">layout</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span>\n\n    <span class=\"nd\">@property</span>\n<div class=\"viewcode-block\" id=\"Layout.style\"><a class=\"viewcode-back\" href=\"../../../api/forms#lux.forms.layouts.Layout.style\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">style</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"n\">LAYOUT_HANDLERS</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_style</span><span class=\"p\">)</span>\n</div>\n<div class=\"viewcode-block\" id=\"Layout.init_parameters\"><a class=\"viewcode-back\" href=\"../../../api/forms#lux.forms.layouts.Layout.init_parameters\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">init_parameters</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">style</span><span class=\"o\">=</span><span class=\"s\">&#39;&#39;</span><span class=\"p\">,</span> <span class=\"n\">labels</span><span class=\"o\">=</span><span class=\"bp\">True</span><span class=\"p\">,</span> <span class=\"n\">submits</span><span class=\"o\">=</span><span class=\"bp\">True</span><span class=\"p\">,</span>\n                        <span class=\"n\">ngmodel</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">,</span> <span class=\"n\">enctype</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">,</span> <span class=\"n\">method</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">,</span>\n                        <span class=\"n\">ngcontroller</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">parameters</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;Called at the and of initialisation.</span>\n\n<span class=\"sd\">        It fills the :attr:`parameters` attribute.</span>\n<span class=\"sd\">        It can be overwritten to customise behaviour.</span>\n<span class=\"sd\">        &#39;&#39;&#39;</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">submits</span> <span class=\"o\">=</span> <span class=\"n\">submits</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_style</span> <span class=\"o\">=</span> <span class=\"n\">style</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">ngmodel</span> <span class=\"o\">=</span> <span class=\"n\">ngmodel</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">labels</span> <span class=\"o\">=</span> <span class=\"n\">labels</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">controller</span> <span class=\"o\">=</span> <span class=\"n\">ngcontroller</span> <span class=\"ow\">or</span> <span class=\"s\">&#39;formController&#39;</span>\n        <span class=\"c\">#parameters[&#39;enctype&#39;] = enctype or &#39;multipart/form-data&#39;</span>\n        <span class=\"c\">#parameters[&#39;method&#39;] = method or &#39;post&#39;</span>\n        <span class=\"k\">if</span> <span class=\"n\">ngmodel</span><span class=\"p\">:</span>\n            <span class=\"n\">parameters</span><span class=\"p\">[</span><span class=\"s\">&#39;novalidate&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"s\">&#39;&#39;</span>\n            <span class=\"n\">parameters</span><span class=\"p\">[</span><span class=\"s\">&#39;name&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">name</span> <span class=\"ow\">or</span> <span class=\"s\">&#39;form&#39;</span>\n            <span class=\"n\">parameters</span><span class=\"p\">[</span><span class=\"s\">&#39;ng-submit&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"s\">&#39;processForm($event)&#39;</span>\n            <span class=\"n\">parameters</span><span class=\"p\">[</span><span class=\"s\">&#39;ng-cloak&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"s\">&#39;&#39;</span>\n        <span class=\"nb\">super</span><span class=\"p\">(</span><span class=\"n\">Layout</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">init_parameters</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">parameters</span><span class=\"p\">)</span>\n</div>\n    <span class=\"k\">def</span> <span class=\"nf\">__repr__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form_class</span><span class=\"p\">:</span>\n            <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">style</span><span class=\"p\">:</span>\n                <span class=\"k\">return</span> <span class=\"s\">&#39;</span><span class=\"si\">%s</span><span class=\"s\">.</span><span class=\"si\">%s</span><span class=\"s\"> </span><span class=\"si\">%s</span><span class=\"s\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form_class</span><span class=\"o\">.</span><span class=\"n\">__name__</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">style</span><span class=\"p\">,</span>\n                                     <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__class__</span><span class=\"o\">.</span><span class=\"n\">__name__</span><span class=\"p\">)</span>\n            <span class=\"k\">else</span><span class=\"p\">:</span>\n                <span class=\"k\">return</span> <span class=\"s\">&#39;</span><span class=\"si\">%s</span><span class=\"s\"> </span><span class=\"si\">%s</span><span class=\"s\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form_class</span><span class=\"o\">.</span><span class=\"n\">__name__</span><span class=\"p\">,</span>\n                                  <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__class__</span><span class=\"o\">.</span><span class=\"n\">__name__</span><span class=\"p\">)</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">__class__</span><span class=\"o\">.</span><span class=\"n\">__name__</span>\n    <span class=\"n\">__str__</span> <span class=\"o\">=</span> <span class=\"n\">__repr__</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">__get__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">form</span><span class=\"p\">,</span> <span class=\"n\">instance_type</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"n\">form</span> <span class=\"ow\">is</span> <span class=\"bp\">None</span><span class=\"p\">:</span>\n            <span class=\"k\">return</span> <span class=\"bp\">self</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form_class</span><span class=\"p\">:</span>\n                <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form_class</span> <span class=\"o\">=</span> <span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">__class__</span>\n                <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">setup</span><span class=\"p\">()</span>\n            <span class=\"k\">elif</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form_class</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">__class__</span><span class=\"p\">:</span>\n                <span class=\"k\">raise</span> <span class=\"ne\">RuntimeError</span><span class=\"p\">(</span><span class=\"s\">&#39;Form layout element for multiple forms&#39;</span><span class=\"p\">)</span>\n            <span class=\"k\">return</span> <span class=\"n\">partial</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">form</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">__call__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">form</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">,</span> <span class=\"n\">controller</span><span class=\"o\">=</span><span class=\"bp\">True</span><span class=\"p\">,</span>\n                 <span class=\"o\">**</span><span class=\"n\">params</span><span class=\"p\">):</span>\n        <span class=\"n\">context</span> <span class=\"o\">=</span> <span class=\"n\">context</span> <span class=\"ow\">or</span> <span class=\"p\">{}</span>\n        <span class=\"n\">context</span><span class=\"p\">[</span><span class=\"s\">&#39;form&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">form</span>\n        <span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">is_valid</span><span class=\"p\">()</span>\n        <span class=\"n\">html</span> <span class=\"o\">=</span> <span class=\"nb\">super</span><span class=\"p\">(</span><span class=\"n\">Layout</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">__call__</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">params</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"n\">controller</span> <span class=\"ow\">and</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">controller</span><span class=\"p\">:</span>\n            <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">attr</span><span class=\"p\">(</span><span class=\"s\">&#39;ng-controller&#39;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">controller</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">html</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">setup</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"n\">missings</span> <span class=\"o\">=</span> <span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form_class</span><span class=\"o\">.</span><span class=\"n\">base_fields</span><span class=\"p\">)</span>\n        <span class=\"n\">children</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">children</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">children</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">ngmodel</span><span class=\"p\">:</span>\n            <span class=\"n\">model</span> <span class=\"o\">=</span> <span class=\"s\">&#39;formMessages.</span><span class=\"si\">%s</span><span class=\"s\">&#39;</span> <span class=\"o\">%</span> <span class=\"n\">FORMKEY</span>\n            <span class=\"n\">ngc</span> <span class=\"o\">=</span> <span class=\"s\">&quot;{&#39;alert-danger&#39;: o.error, &#39;alert-info&#39;: !o.error}&quot;</span>\n            <span class=\"n\">messages</span> <span class=\"o\">=</span> <span class=\"n\">Template</span><span class=\"p\">(</span><span class=\"s\">&#39;{{o.message}}&#39;</span><span class=\"p\">,</span> <span class=\"n\">tag</span><span class=\"o\">=</span><span class=\"s\">&#39;div&#39;</span><span class=\"p\">,</span> <span class=\"n\">classes</span><span class=\"o\">=</span><span class=\"s\">&#39;alert&#39;</span><span class=\"p\">)</span>\n            <span class=\"n\">messages</span><span class=\"o\">.</span><span class=\"n\">parameters</span><span class=\"p\">[</span><span class=\"s\">&#39;ng-repeat&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"s\">&#39;o in </span><span class=\"si\">%s</span><span class=\"s\">&#39;</span> <span class=\"o\">%</span> <span class=\"n\">model</span>\n            <span class=\"n\">messages</span><span class=\"o\">.</span><span class=\"n\">parameters</span><span class=\"p\">[</span><span class=\"s\">&#39;ng-model&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">model</span>\n            <span class=\"n\">messages</span><span class=\"o\">.</span><span class=\"n\">parameters</span><span class=\"p\">[</span><span class=\"s\">&#39;ng-class&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">ngc</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">children</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">messages</span><span class=\"p\">)</span>\n        <span class=\"k\">for</span> <span class=\"n\">field</span> <span class=\"ow\">in</span> <span class=\"n\">check_fields</span><span class=\"p\">(</span><span class=\"n\">children</span><span class=\"p\">,</span> <span class=\"n\">missings</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">Group</span><span class=\"p\">):</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">children</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">field</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"n\">missings</span><span class=\"p\">:</span>\n            <span class=\"n\">field</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">default_element</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">missings</span><span class=\"p\">)</span>\n            <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">check_fields</span><span class=\"p\">(</span><span class=\"n\">missings</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"p\">)</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">children</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">field</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">submits</span><span class=\"p\">:</span>\n            <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">submits</span> <span class=\"ow\">is</span> <span class=\"bp\">True</span><span class=\"p\">:</span>\n                <span class=\"n\">field</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">default_element</span><span class=\"p\">(</span><span class=\"n\">Submit</span><span class=\"p\">())</span>\n            <span class=\"k\">elif</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">submits</span><span class=\"p\">:</span>\n                <span class=\"n\">submits</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">submits</span>\n                <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">submits</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"nb\">list</span><span class=\"p\">,</span> <span class=\"nb\">tuple</span><span class=\"p\">)):</span>\n                    <span class=\"n\">submits</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">submits</span><span class=\"p\">]</span>\n                <span class=\"n\">field</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">default_element</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">submits</span><span class=\"p\">)</span>\n            <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">check_fields</span><span class=\"p\">((),</span> <span class=\"bp\">self</span><span class=\"p\">)</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">children</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">field</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">wrap_field</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">html</span><span class=\"p\">,</span> <span class=\"n\">bfield</span><span class=\"p\">,</span> <span class=\"n\">label</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">style</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">html</span><span class=\"p\">,</span> <span class=\"n\">bfield</span><span class=\"p\">,</span> <span class=\"n\">label</span><span class=\"p\">)</span>\n\n</div>\n<div class=\"viewcode-block\" id=\"register_layout_style\"><a class=\"viewcode-back\" href=\"../../../api/forms#lux.forms.layouts.register_layout_style\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">register_layout_style</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">handler</span><span class=\"p\">):</span>\n    <span class=\"sd\">&#39;&#39;&#39;Register a new :class:`LayoutStyle` for rendring forms.&#39;&#39;&#39;</span>\n    <span class=\"k\">global</span> <span class=\"n\">LAYOUT_HANDLERS</span>\n    <span class=\"n\">LAYOUT_HANDLERS</span><span class=\"p\">[</span><span class=\"n\">name</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">handler</span>\n\n</div>\n<div class=\"viewcode-block\" id=\"LayoutStyle\"><a class=\"viewcode-back\" href=\"../../../api/forms#lux.forms.layouts.LayoutStyle\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">LayoutStyle</span><span class=\"p\">(</span><span class=\"nb\">object</span><span class=\"p\">):</span>\n    <span class=\"sd\">&#39;&#39;&#39;Layout style handler.</span>\n\n<span class=\"sd\">    .. attribute:: name</span>\n\n<span class=\"sd\">        The name for this :class:`LayoutStyle. The name is used by the</span>\n<span class=\"sd\">        :class:`Layout` to create the form class.</span>\n<span class=\"sd\">        For example the ``horizontal``</span>\n<span class=\"sd\">        layout has a form class ``form-horizontal``.</span>\n<span class=\"sd\">    &#39;&#39;&#39;</span>\n    <span class=\"n\">label_class</span> <span class=\"o\">=</span> <span class=\"s\">&#39;control-label&#39;</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">__call__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">html</span><span class=\"p\">,</span> <span class=\"n\">widget</span><span class=\"p\">,</span> <span class=\"n\">field</span><span class=\"p\">):</span>\n        <span class=\"nb\">type</span> <span class=\"o\">=</span> <span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">attr</span><span class=\"p\">(</span><span class=\"s\">&#39;type&#39;</span><span class=\"p\">)</span>\n        <span class=\"n\">maker</span> <span class=\"o\">=</span> <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">maker</span>\n        <span class=\"n\">params</span> <span class=\"o\">=</span> <span class=\"n\">maker</span><span class=\"o\">.</span><span class=\"n\">parameters</span>\n        <span class=\"c\">#</span>\n        <span class=\"k\">if</span> <span class=\"nb\">type</span> <span class=\"ow\">in</span> <span class=\"p\">(</span><span class=\"s\">&#39;radio&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;checkbox&#39;</span><span class=\"p\">):</span>\n            <span class=\"k\">if</span> <span class=\"n\">maker</span><span class=\"o\">.</span><span class=\"n\">parameters</span><span class=\"o\">.</span><span class=\"n\">inline</span><span class=\"p\">:</span>\n                <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">addClass</span><span class=\"p\">(</span><span class=\"s\">&#39;</span><span class=\"si\">%s</span><span class=\"s\">-inline&#39;</span> <span class=\"o\">%</span> <span class=\"nb\">type</span><span class=\"p\">)</span>\n            <span class=\"k\">else</span><span class=\"p\">:</span>\n                <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">addClass</span><span class=\"p\">(</span><span class=\"nb\">type</span><span class=\"p\">)</span>\n            <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">Html</span><span class=\"p\">(</span><span class=\"s\">&#39;label&#39;</span><span class=\"p\">,</span> <span class=\"n\">widget</span><span class=\"p\">,</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">label</span><span class=\"p\">))</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"n\">layout</span> <span class=\"o\">=</span> <span class=\"n\">maker</span><span class=\"o\">.</span><span class=\"n\">layout</span>\n            <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">addClass</span><span class=\"p\">(</span><span class=\"s\">&#39;form-group&#39;</span><span class=\"p\">)</span>\n            <span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">addClass</span><span class=\"p\">(</span><span class=\"s\">&#39;form-control&#39;</span><span class=\"p\">)</span>\n            <span class=\"k\">if</span> <span class=\"n\">layout</span><span class=\"o\">.</span><span class=\"n\">labels</span> <span class=\"ow\">and</span> <span class=\"n\">params</span><span class=\"o\">.</span><span class=\"n\">label</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"bp\">False</span><span class=\"p\">:</span>\n                <span class=\"n\">label</span> <span class=\"o\">=</span> <span class=\"n\">Html</span><span class=\"p\">(</span><span class=\"s\">&#39;label&#39;</span><span class=\"p\">,</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">label</span><span class=\"p\">,</span> <span class=\"n\">cn</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">label_class</span><span class=\"p\">)</span>\n                <span class=\"n\">label</span><span class=\"o\">.</span><span class=\"n\">attr</span><span class=\"p\">(</span><span class=\"s\">&#39;for&#39;</span><span class=\"p\">,</span> <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">attr</span><span class=\"p\">(</span><span class=\"s\">&#39;id&#39;</span><span class=\"p\">))</span>\n                <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">label</span><span class=\"p\">)</span>\n            <span class=\"k\">elif</span> <span class=\"ow\">not</span> <span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">attr</span><span class=\"p\">(</span><span class=\"s\">&#39;placeholder&#39;</span><span class=\"p\">):</span>\n                <span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">attr</span><span class=\"p\">(</span><span class=\"s\">&#39;placeholder&#39;</span><span class=\"p\">,</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">label</span><span class=\"p\">)</span>\n            <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">widget</span><span class=\"p\">)</span>\n            <span class=\"c\">#</span>\n            <span class=\"c\"># Add error tags</span>\n            <span class=\"k\">if</span> <span class=\"n\">layout</span><span class=\"o\">.</span><span class=\"n\">ngmodel</span><span class=\"p\">:</span>\n                <span class=\"n\">cn</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">label_class</span> <span class=\"o\">+</span> <span class=\"s\">&#39; help-block&#39;</span>\n                <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">layout</span><span class=\"o\">.</span><span class=\"n\">parameters</span><span class=\"o\">.</span><span class=\"n\">name</span>\n                <span class=\"k\">if</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">required</span><span class=\"p\">:</span>\n                    <span class=\"n\">error</span> <span class=\"o\">=</span> <span class=\"n\">Html</span><span class=\"p\">(</span><span class=\"s\">&#39;p&#39;</span><span class=\"p\">,</span> <span class=\"n\">maker</span><span class=\"o\">.</span><span class=\"n\">required_message</span><span class=\"p\">(</span><span class=\"n\">field</span><span class=\"p\">),</span> <span class=\"n\">cn</span><span class=\"o\">=</span><span class=\"n\">cn</span><span class=\"p\">)</span>\n                    <span class=\"n\">error</span><span class=\"o\">.</span><span class=\"n\">attr</span><span class=\"p\">(</span><span class=\"s\">&#39;ng-class&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;{active: </span><span class=\"si\">%s</span><span class=\"s\">.</span><span class=\"si\">%s</span><span class=\"s\">.$error.required}&#39;</span> <span class=\"o\">%</span>\n                               <span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">))</span>\n                    <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">error</span><span class=\"p\">)</span>\n                <span class=\"n\">error</span> <span class=\"o\">=</span> <span class=\"n\">Html</span><span class=\"p\">(</span><span class=\"s\">&#39;p&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;{{formErrors.</span><span class=\"si\">%s</span><span class=\"s\">}}&#39;</span> <span class=\"o\">%</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">cn</span><span class=\"o\">=</span><span class=\"n\">cn</span><span class=\"p\">)</span>\n                <span class=\"n\">error</span><span class=\"o\">.</span><span class=\"n\">attr</span><span class=\"p\">(</span><span class=\"s\">&#39;ng-class&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;{active: </span><span class=\"si\">%s</span><span class=\"s\">.</span><span class=\"si\">%s</span><span class=\"s\">.$error.</span><span class=\"si\">%s</span><span class=\"s\">}&#39;</span> <span class=\"o\">%</span>\n                           <span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">))</span>\n                <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">error</span><span class=\"p\">)</span>\n                <span class=\"n\">error</span> <span class=\"o\">=</span> <span class=\"n\">Html</span><span class=\"p\">(</span><span class=\"s\">&#39;p&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;{{o.message}}&#39;</span><span class=\"p\">,</span> <span class=\"n\">cn</span><span class=\"o\">=</span><span class=\"n\">cn</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">addClass</span><span class=\"p\">(</span><span class=\"s\">&#39;active&#39;</span><span class=\"p\">)</span>\n                <span class=\"n\">error</span><span class=\"o\">.</span><span class=\"n\">attr</span><span class=\"p\">(</span><span class=\"s\">&#39;ng-repeat-start&#39;</span><span class=\"p\">,</span>\n                           <span class=\"s\">&quot;o in formMessages.</span><span class=\"si\">%s</span><span class=\"s\">&quot;</span> <span class=\"o\">%</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">)</span>\n                <span class=\"n\">html</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">Html</span><span class=\"p\">(</span><span class=\"s\">&#39;p&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;{{formErrors.</span><span class=\"si\">%s</span><span class=\"s\">}}&#39;</span> <span class=\"o\">%</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">cn</span><span class=\"o\">=</span><span class=\"n\">cn</span><span class=\"p\">))</span>\n\n</div>\n<span class=\"k\">class</span> <span class=\"nc\">HorizontalLayout</span><span class=\"p\">(</span><span class=\"n\">LayoutStyle</span><span class=\"p\">):</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">__call__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">html</span><span class=\"p\">,</span> <span class=\"n\">widget</span><span class=\"p\">,</span> <span class=\"n\">field</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"n\">html</span>\n\n\n<span class=\"n\">register_layout_style</span><span class=\"p\">(</span><span class=\"s\">&#39;&#39;</span><span class=\"p\">,</span> <span class=\"n\">LayoutStyle</span><span class=\"p\">())</span>\n<span class=\"n\">register_layout_style</span><span class=\"p\">(</span><span class=\"s\">&#39;horizontal&#39;</span><span class=\"p\">,</span> <span class=\"n\">HorizontalLayout</span><span class=\"p\">())</span>\n</pre></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class='small hidden-print text-muted' id='page-footer'>\n    <div class='container'>\n        <div class='row'>\n            <div class='block col-sm-5'>\n                <div class='hidden-xs'>\n                    <ul class=\"fa-ul text-left\">\n    <li><i class=\"fa-li fa fa-copyright\"></i>2014 <a href=\"http://quantmind.com\">Quantmind</a></li>\n    <li>Site build with Lux on python 3.4.1</li>\n    <li>Docs build with <a href=\"http://sphinx-doc.org/\" target=\"_blank\">Sphinx</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/changelog\">Changelog</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/api/\">API</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/EXTENSIONS/\">Extensions</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/images\">Images</a></li>\n</ul>\n                </div>\n                <div class='text-center visible-xs'>\n                    <ul class=\"fa-ul text-left\">\n    <li><i class=\"fa-li fa fa-copyright\"></i>2014 <a href=\"http://quantmind.com\">Quantmind</a></li>\n    <li>Site build with Lux on python 3.4.1</li>\n    <li>Docs build with <a href=\"http://sphinx-doc.org/\" target=\"_blank\">Sphinx</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/changelog\">Changelog</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/api/\">API</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/EXTENSIONS/\">Extensions</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/images\">Images</a></li>\n</ul>\n                </div>\n            </div>\n            <div class='block col-sm-2 text-center'>\n                <div class='hidden-xs'>\n                    <p><a href='#top' title=\"Lux\" class=\"hover-opacity\">\n    <img height=50 title='Lux' src='http://quantmind.github.io/lux/media/luxsite/lux.png' alt='Lux'>\n</a></p>\n                </div>\n                <div class='visible-xs'>\n                    <p><a href='https://twitter.com/quantmind' title='Follow quantmind on twitter'>\n<i class='fa fa-twitter fa-2x'></i></a>\n<a href='https://plus.google.com/+QuantmindPlus' title='Follow quantmind on google+'>\n<i class='fa fa-google-plus-square fa-2x'></i></a>\n<a href='https://www.facebook.com/quantmind' title='Follow quantmind on facebook'>\n<i class='fa fa-facebook-square fa-2x'></i></a>\n<a href='https://github.com/quantmind/lux' title='Lux on github'>\n<i class='fa fa-github fa-2x'></i></a></p>\n                </div>\n            </div>\n            <div class='block col-sm-5'>\n                <div class='text-right hidden-xs'>\n                    <p><a href='https://twitter.com/quantmind' title='Follow quantmind on twitter'>\n<i class='fa fa-twitter fa-2x'></i></a>\n<a href='https://plus.google.com/+QuantmindPlus' title='Follow quantmind on google+'>\n<i class='fa fa-google-plus-square fa-2x'></i></a>\n<a href='https://www.facebook.com/quantmind' title='Follow quantmind on facebook'>\n<i class='fa fa-facebook-square fa-2x'></i></a>\n<a href='https://github.com/quantmind/lux' title='Lux on github'>\n<i class='fa fa-github fa-2x'></i></a></p>\n                </div>\n                <div class='text-center visible-xs'>\n                    <p><a href='#top' title=\"Lux\" class=\"hover-opacity\">\n    <img height=50 title='Lux' src='http://quantmind.github.io/lux/media/luxsite/lux.png' alt='Lux'>\n</a></p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>"}, "site": {"lux_version": "0.1.0-alpha.1", "template_engine": null, "date": "2014-10-14T10-48-59", "name": "Lux", "template": "doc.html", "python_version": "3.4.1", "media": "/media", "url": "http://quantmind.github.io/lux", "year": 2014}, "head": {}, "html_url": "http://quantmind.github.io/lux/docs/modules/lux/forms/layouts", "api_url": "http://quantmind.github.io/lux/jsonapi/docs/modules/lux/forms/layouts"}