{"modified": "2014-11-11T17:40:26", "content_type": "text/html", "site": {"lux_version": "0.1.1-alpha.1", "template_engine": null, "year": 2014, "url": "http://quantmind.github.io/lux", "python_version": "3.4.2", "media": "/media", "date": "2014-11-11T17-40-20", "name": "Lux", "template": "doc.html"}, "html_url": "http://quantmind.github.io/lux/docs/modules/lux/extensions/sessions/sessionmixin", "head": {}, "name": "modules_lux_extensions_sessions_sessionmixin", "slug": "modules/lux/extensions/sessions/sessionmixin", "api_url": "http://quantmind.github.io/lux/jsonapi/docs/modules/lux/extensions/sessions/sessionmixin", "html": {"main": "<section id=\"page-header\" class=\"page-header-outer modules_lux_extensions_sessions_sessionmixin-header\">\n    <div class=\"layer\">\n        <div class=\"page-header\">\n            <div class=\"container fullpage\">\n                <div class=\"row fullpage\">\n                    <div class=\"col-sm-12 text-center\">\n                        <breadcrumbs></breadcrumbs>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</section>\n\n<div id=\"page-main\">\n    <div class=\"container\">\n        <div class=\"row\">\n            <div class=\"modules_lux_extensions_sessions_sessionmixin-main col-md-12\">\n                <div class=\"center-block\" style=\"max-width: 900px\" data-highlight data-hash-scroll>\n                    <h1>Source code for lux.extensions.sessions.sessionmixin</h1><div class=\"highlight\"><pre>\n<span class=\"kn\">import</span> <span class=\"nn\">time</span>\n<span class=\"kn\">import</span> <span class=\"nn\">json</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">importlib</span> <span class=\"kn\">import</span> <span class=\"n\">import_module</span>\n<span class=\"kn\">from</span> <span class=\"nn\">datetime</span> <span class=\"kn\">import</span> <span class=\"n\">datetime</span><span class=\"p\">,</span> <span class=\"n\">timedelta</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">pulsar</span> <span class=\"kn\">import</span> <span class=\"n\">PermissionDenied</span><span class=\"p\">,</span> <span class=\"n\">Http404</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pulsar.utils.pep</span> <span class=\"kn\">import</span> <span class=\"n\">to_bytes</span><span class=\"p\">,</span> <span class=\"n\">to_string</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pulsar.utils.importer</span> <span class=\"kn\">import</span> <span class=\"n\">module_attribute</span>\n\n<span class=\"kn\">import</span> <span class=\"nn\">lux</span>\n<span class=\"kn\">from</span> <span class=\"nn\">lux</span> <span class=\"kn\">import</span> <span class=\"n\">Router</span>\n<span class=\"kn\">from</span> <span class=\"nn\">lux.forms</span> <span class=\"kn\">import</span> <span class=\"n\">Form</span>\n<span class=\"kn\">from</span> <span class=\"nn\">lux.utils.crypt</span> <span class=\"kn\">import</span> <span class=\"n\">get_random_string</span><span class=\"p\">,</span> <span class=\"n\">digest</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">.jwtmixin</span> <span class=\"kn\">import</span> <span class=\"n\">jwt</span>\n<span class=\"kn\">from</span> <span class=\"nn\">.views</span> <span class=\"kn\">import</span> <span class=\"n\">ForgotPassword</span>\n<span class=\"kn\">from</span> <span class=\"nn\">.backend</span> <span class=\"kn\">import</span> <span class=\"n\">REASON_BAD_TOKEN</span>\n\n\n<span class=\"n\">__all__</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s\">&#39;SessionMixin&#39;</span><span class=\"p\">]</span>\n\n\n<div class=\"viewcode-block\" id=\"SessionMixin\"><a class=\"viewcode-back\" href=\"../../../../api/sessions#lux.extensions.sessions.sessionmixin.SessionMixin\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">SessionMixin</span><span class=\"p\">(</span><span class=\"nb\">object</span><span class=\"p\">):</span>\n    <span class=\"sd\">&#39;&#39;&#39;Mixin for :class:`.AuthBackend` via sessions.</span>\n<span class=\"sd\">    &#39;&#39;&#39;</span>\n    <span class=\"n\">READ</span> <span class=\"o\">=</span> <span class=\"mi\">10</span>\n    <span class=\"n\">UPDATE</span> <span class=\"o\">=</span> <span class=\"mi\">20</span>\n    <span class=\"n\">CREATE</span> <span class=\"o\">=</span> <span class=\"mi\">30</span>\n    <span class=\"n\">REMOVE</span> <span class=\"o\">=</span> <span class=\"mi\">40</span>\n    <span class=\"n\">ForgotPasswordRouter</span> <span class=\"o\">=</span> <span class=\"bp\">None</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">app</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">app</span>\n        <span class=\"n\">cfg</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">config</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">encoding</span> <span class=\"o\">=</span> <span class=\"n\">cfg</span><span class=\"p\">[</span><span class=\"s\">&#39;ENCODING&#39;</span><span class=\"p\">]</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">secret_key</span> <span class=\"o\">=</span> <span class=\"n\">cfg</span><span class=\"p\">[</span><span class=\"s\">&#39;SECRET_KEY&#39;</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">encode</span><span class=\"p\">()</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">session_cookie_name</span> <span class=\"o\">=</span> <span class=\"n\">cfg</span><span class=\"p\">[</span><span class=\"s\">&#39;SESSION_COOKIE_NAME&#39;</span><span class=\"p\">]</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">session_expiry</span> <span class=\"o\">=</span> <span class=\"n\">cfg</span><span class=\"p\">[</span><span class=\"s\">&#39;SESSION_EXPIRY&#39;</span><span class=\"p\">]</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">salt_size</span> <span class=\"o\">=</span> <span class=\"n\">cfg</span><span class=\"p\">[</span><span class=\"s\">&#39;AUTH_SALT_SIZE&#39;</span><span class=\"p\">]</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">check_username</span> <span class=\"o\">=</span> <span class=\"n\">cfg</span><span class=\"p\">[</span><span class=\"s\">&#39;CHECK_USERNAME&#39;</span><span class=\"p\">]</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">csrf_expiry</span> <span class=\"o\">=</span> <span class=\"n\">cfg</span><span class=\"p\">[</span><span class=\"s\">&#39;CSRF_EXPIRY&#39;</span><span class=\"p\">]</span>\n        <span class=\"n\">algorithm</span> <span class=\"o\">=</span> <span class=\"n\">cfg</span><span class=\"p\">[</span><span class=\"s\">&#39;CRYPT_ALGORITHM&#39;</span><span class=\"p\">]</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">crypt_module</span> <span class=\"o\">=</span> <span class=\"n\">import_module</span><span class=\"p\">(</span><span class=\"n\">algorithm</span><span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">jwt</span> <span class=\"o\">=</span> <span class=\"n\">jwt</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">request_middleware</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"n\">cfg</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">config</span>\n        <span class=\"n\">middleware</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"bp\">self</span><span class=\"p\">]</span>\n        <span class=\"k\">if</span> <span class=\"n\">cfg</span><span class=\"p\">[</span><span class=\"s\">&#39;SESSION_MESSAGES&#39;</span><span class=\"p\">]:</span>\n            <span class=\"n\">middleware</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">Router</span><span class=\"p\">(</span><span class=\"s\">&#39;_dismiss_message&#39;</span><span class=\"p\">,</span>\n                                     <span class=\"n\">post</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_dismiss_message</span><span class=\"p\">))</span>\n            <span class=\"n\">reset</span> <span class=\"o\">=</span> <span class=\"n\">cfg</span><span class=\"p\">[</span><span class=\"s\">&#39;RESET_PASSWORD_URL&#39;</span><span class=\"p\">]</span>\n            <span class=\"k\">if</span> <span class=\"n\">reset</span><span class=\"p\">:</span>\n                <span class=\"n\">router</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">ForgotPasswordRouter</span> <span class=\"ow\">or</span> <span class=\"n\">ForgotPassword</span>\n                <span class=\"n\">middleware</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">router</span><span class=\"p\">(</span><span class=\"n\">reset</span><span class=\"p\">))</span>\n        <span class=\"k\">return</span> <span class=\"n\">middleware</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">request</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">):</span>\n        <span class=\"n\">key</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">config</span><span class=\"p\">[</span><span class=\"s\">&#39;SESSION_COOKIE_NAME&#39;</span><span class=\"p\">]</span>\n        <span class=\"n\">session_key</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">cookies</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">key</span><span class=\"p\">)</span>\n        <span class=\"n\">session</span> <span class=\"o\">=</span> <span class=\"bp\">None</span>\n        <span class=\"k\">if</span> <span class=\"n\">session_key</span><span class=\"p\">:</span>\n            <span class=\"n\">session</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">get_session</span><span class=\"p\">(</span><span class=\"n\">session_key</span><span class=\"o\">.</span><span class=\"n\">value</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">session</span><span class=\"p\">:</span>\n            <span class=\"n\">session</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">create_session</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">)</span>\n        <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">cache</span><span class=\"o\">.</span><span class=\"n\">session</span> <span class=\"o\">=</span> <span class=\"n\">session</span>\n        <span class=\"k\">if</span> <span class=\"n\">session</span><span class=\"o\">.</span><span class=\"n\">user</span><span class=\"p\">:</span>\n            <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">cache</span><span class=\"o\">.</span><span class=\"n\">user</span> <span class=\"o\">=</span> <span class=\"n\">session</span><span class=\"o\">.</span><span class=\"n\">user</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">()</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">cache</span><span class=\"o\">.</span><span class=\"n\">user</span><span class=\"p\">:</span>\n            <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">cache</span><span class=\"o\">.</span><span class=\"n\">user</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">anonymous</span><span class=\"p\">()</span>\n\n\n    <span class=\"k\">def</span> <span class=\"nf\">response</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">response</span><span class=\"p\">):</span>\n        <span class=\"n\">session</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">cache</span><span class=\"o\">.</span><span class=\"n\">session</span>\n        <span class=\"k\">if</span> <span class=\"n\">session</span><span class=\"p\">:</span>\n            <span class=\"k\">if</span> <span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">can_set_cookies</span><span class=\"p\">():</span>\n                <span class=\"n\">key</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">config</span><span class=\"p\">[</span><span class=\"s\">&#39;SESSION_COOKIE_NAME&#39;</span><span class=\"p\">]</span>\n                <span class=\"n\">session_key</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">cookies</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">key</span><span class=\"p\">)</span>\n                <span class=\"nb\">id</span> <span class=\"o\">=</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">session</span><span class=\"o\">.</span><span class=\"n\">key</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"p\">())</span>\n                <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">session_key</span> <span class=\"ow\">or</span> <span class=\"n\">session_key</span><span class=\"o\">.</span><span class=\"n\">value</span> <span class=\"o\">!=</span> <span class=\"nb\">id</span><span class=\"p\">:</span>\n                    <span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">set_cookie</span><span class=\"p\">(</span><span class=\"n\">key</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"nb\">id</span><span class=\"p\">),</span> <span class=\"n\">httponly</span><span class=\"o\">=</span><span class=\"bp\">True</span><span class=\"p\">,</span>\n                                        <span class=\"n\">expires</span><span class=\"o\">=</span><span class=\"n\">session</span><span class=\"o\">.</span><span class=\"n\">expiry</span><span class=\"p\">)</span>\n\n            <span class=\"n\">session</span><span class=\"o\">.</span><span class=\"n\">put</span><span class=\"p\">()</span>\n        <span class=\"k\">return</span> <span class=\"n\">response</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">csrf_token</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">):</span>\n        <span class=\"n\">session</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">cache</span><span class=\"o\">.</span><span class=\"n\">session</span>\n        <span class=\"k\">if</span> <span class=\"n\">session</span><span class=\"p\">:</span>\n            <span class=\"k\">assert</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">jwt</span><span class=\"p\">,</span> <span class=\"s\">&#39;Requires jwt package&#39;</span>\n            <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">jwt</span><span class=\"o\">.</span><span class=\"n\">encode</span><span class=\"p\">({</span><span class=\"s\">&#39;session&#39;</span><span class=\"p\">:</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">session_key</span><span class=\"p\">(</span><span class=\"n\">session</span><span class=\"p\">),</span>\n                                    <span class=\"s\">&#39;exp&#39;</span><span class=\"p\">:</span> <span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"p\">()</span> <span class=\"o\">+</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">csrf_expiry</span><span class=\"p\">},</span>\n                                   <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">secret_key</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">validate_csrf_token</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">token</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">token</span><span class=\"p\">:</span>\n            <span class=\"k\">raise</span> <span class=\"n\">PermissionDenied</span><span class=\"p\">(</span><span class=\"n\">REASON_BAD_TOKEN</span><span class=\"p\">)</span>\n        <span class=\"k\">try</span><span class=\"p\">:</span>\n            <span class=\"k\">assert</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">jwt</span><span class=\"p\">,</span> <span class=\"s\">&#39;Requires jwt package&#39;</span>\n            <span class=\"n\">token</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">jwt</span><span class=\"o\">.</span><span class=\"n\">decode</span><span class=\"p\">(</span><span class=\"n\">token</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">secret_key</span><span class=\"p\">)</span>\n        <span class=\"k\">except</span> <span class=\"n\">jwt</span><span class=\"o\">.</span><span class=\"n\">ExpiredSignature</span><span class=\"p\">:</span>\n            <span class=\"k\">raise</span> <span class=\"n\">PermissionDenied</span><span class=\"p\">(</span><span class=\"s\">&#39;Expired token&#39;</span><span class=\"p\">)</span>\n        <span class=\"k\">except</span> <span class=\"ne\">Exception</span><span class=\"p\">:</span>\n            <span class=\"k\">raise</span> <span class=\"n\">PermissionDenied</span><span class=\"p\">(</span><span class=\"n\">REASON_BAD_TOKEN</span><span class=\"p\">)</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"k\">if</span> <span class=\"n\">token</span><span class=\"p\">[</span><span class=\"s\">&#39;session&#39;</span><span class=\"p\">]</span> <span class=\"o\">!=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">session_key</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">cache</span><span class=\"o\">.</span><span class=\"n\">session</span><span class=\"p\">):</span>\n                <span class=\"k\">raise</span> <span class=\"n\">PermissionDenied</span><span class=\"p\">(</span><span class=\"n\">REASON_BAD_TOKEN</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">create_session_id</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">while</span> <span class=\"bp\">True</span><span class=\"p\">:</span>\n            <span class=\"n\">session_key</span> <span class=\"o\">=</span> <span class=\"n\">get_random_string</span><span class=\"p\">(</span><span class=\"mi\">32</span><span class=\"p\">)</span>\n            <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">get_session</span><span class=\"p\">(</span><span class=\"n\">session_key</span><span class=\"p\">):</span>\n                <span class=\"k\">break</span>\n        <span class=\"k\">return</span> <span class=\"n\">session_key</span>\n\n<div class=\"viewcode-block\" id=\"SessionMixin.get_session\"><a class=\"viewcode-back\" href=\"../../../../api/sessions#lux.extensions.sessions.sessionmixin.SessionMixin.get_session\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">get_session</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">key</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;Retrieve a session from its key</span>\n<span class=\"sd\">        &#39;&#39;&#39;</span>\n        <span class=\"k\">raise</span> <span class=\"ne\">NotImplementedError</span>\n</div>\n<div class=\"viewcode-block\" id=\"SessionMixin.session_key\"><a class=\"viewcode-back\" href=\"../../../../api/sessions#lux.extensions.sessions.sessionmixin.SessionMixin.session_key\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">session_key</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">session</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;Session key from session object</span>\n<span class=\"sd\">        &#39;&#39;&#39;</span>\n        <span class=\"k\">raise</span> <span class=\"ne\">NotImplementedError</span>\n</div>\n<div class=\"viewcode-block\" id=\"SessionMixin.create_registration\"><a class=\"viewcode-back\" href=\"../../../../api/sessions#lux.extensions.sessions.sessionmixin.SessionMixin.create_registration\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">create_registration</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">user</span><span class=\"p\">,</span> <span class=\"n\">expiry</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;Create a registration entry for a user.</span>\n<span class=\"sd\">        This method should return the registration/activation key.&#39;&#39;&#39;</span>\n        <span class=\"k\">raise</span> <span class=\"ne\">NotImplementedError</span>\n</div>\n<div class=\"viewcode-block\" id=\"SessionMixin.confirm_registration\"><a class=\"viewcode-back\" href=\"../../../../api/sessions#lux.extensions.sessions.sessionmixin.SessionMixin.confirm_registration\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">confirm_registration</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">params</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;Confirm registration&#39;&#39;&#39;</span>\n        <span class=\"k\">raise</span> <span class=\"ne\">NotImplementedError</span>\n</div>\n<div class=\"viewcode-block\" id=\"SessionMixin.create_session\"><a class=\"viewcode-back\" href=\"../../../../api/sessions#lux.extensions.sessions.sessionmixin.SessionMixin.create_session\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">create_session</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">user</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">,</span> <span class=\"n\">expiry</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;Create a new session</span>\n<span class=\"sd\">        &#39;&#39;&#39;</span>\n        <span class=\"k\">raise</span> <span class=\"ne\">NotImplementedError</span>\n</div>\n<div class=\"viewcode-block\" id=\"SessionMixin.auth_key_used\"><a class=\"viewcode-back\" href=\"../../../../api/sessions#lux.extensions.sessions.sessionmixin.SessionMixin.auth_key_used\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">auth_key_used</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">key</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;The authentication ``key`` has been used and this method is</span>\n<span class=\"sd\">        for setting/updating the backend model accordingly.</span>\n<span class=\"sd\">        Used during password retrieval and user registration</span>\n<span class=\"sd\">        &#39;&#39;&#39;</span>\n        <span class=\"k\">raise</span> <span class=\"ne\">NotImplementedError</span>\n</div>\n    <span class=\"k\">def</span> <span class=\"nf\">password_recovery</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">email</span><span class=\"p\">):</span>\n        <span class=\"k\">raise</span> <span class=\"ne\">NotImplementedError</span>\n\n<div class=\"viewcode-block\" id=\"SessionMixin.login\"><a class=\"viewcode-back\" href=\"../../../../api/sessions#lux.extensions.sessions.sessionmixin.SessionMixin.login\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">login</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">user</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;Login a user from a model or from post data</span>\n<span class=\"sd\">        &#39;&#39;&#39;</span>\n        <span class=\"k\">if</span> <span class=\"n\">user</span> <span class=\"ow\">is</span> <span class=\"bp\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">body_data</span><span class=\"p\">()</span>\n            <span class=\"n\">user</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">authenticate</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">data</span><span class=\"p\">)</span>\n            <span class=\"k\">if</span> <span class=\"n\">user</span> <span class=\"ow\">is</span> <span class=\"bp\">None</span><span class=\"p\">:</span>\n                <span class=\"k\">raise</span> <span class=\"n\">AuthenticationError</span><span class=\"p\">(</span><span class=\"s\">&#39;Invalid username or password&#39;</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">user</span><span class=\"o\">.</span><span class=\"n\">is_active</span><span class=\"p\">():</span>\n            <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">inactive_user_login</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">user</span><span class=\"p\">)</span>\n        <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">cache</span><span class=\"o\">.</span><span class=\"n\">session</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">create_session</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">user</span><span class=\"p\">)</span>\n        <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">cache</span><span class=\"o\">.</span><span class=\"n\">user</span> <span class=\"o\">=</span> <span class=\"n\">user</span>\n        <span class=\"k\">return</span> <span class=\"n\">user</span>\n</div>\n<div class=\"viewcode-block\" id=\"SessionMixin.inactive_user_login\"><a class=\"viewcode-back\" href=\"../../../../api/sessions#lux.extensions.sessions.sessionmixin.SessionMixin.inactive_user_login\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">inactive_user_login</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">user</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;Handle a user not yet active&#39;&#39;&#39;</span>\n        <span class=\"n\">cfg</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">config</span>\n        <span class=\"n\">url</span> <span class=\"o\">=</span> <span class=\"s\">&#39;/signup/confirmation/</span><span class=\"si\">%s</span><span class=\"s\">&#39;</span> <span class=\"o\">%</span> <span class=\"n\">user</span><span class=\"o\">.</span><span class=\"n\">username</span>\n        <span class=\"n\">session</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">cache</span><span class=\"o\">.</span><span class=\"n\">session</span>\n        <span class=\"n\">context</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s\">&#39;email&#39;</span><span class=\"p\">:</span> <span class=\"n\">user</span><span class=\"o\">.</span><span class=\"n\">email</span><span class=\"p\">,</span>\n                   <span class=\"s\">&#39;email_from&#39;</span><span class=\"p\">:</span> <span class=\"n\">cfg</span><span class=\"p\">[</span><span class=\"s\">&#39;DEFAULT_FROM_EMAIL&#39;</span><span class=\"p\">],</span>\n                   <span class=\"s\">&#39;confirmation_url&#39;</span><span class=\"p\">:</span> <span class=\"n\">url</span><span class=\"p\">}</span>\n        <span class=\"n\">message</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">render_template</span><span class=\"p\">(</span><span class=\"s\">&#39;inactive.txt&#39;</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">)</span>\n        <span class=\"n\">session</span><span class=\"o\">.</span><span class=\"n\">warning</span><span class=\"p\">(</span><span class=\"n\">message</span><span class=\"p\">)</span>\n</div>\n<div class=\"viewcode-block\" id=\"SessionMixin.logout\"><a class=\"viewcode-back\" href=\"../../../../api/sessions#lux.extensions.sessions.sessionmixin.SessionMixin.logout\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">logout</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">user</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;Logout a ``user``</span>\n<span class=\"sd\">        &#39;&#39;&#39;</span>\n        <span class=\"n\">session</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">cache</span><span class=\"o\">.</span><span class=\"n\">session</span>\n        <span class=\"n\">user</span> <span class=\"o\">=</span> <span class=\"n\">user</span> <span class=\"ow\">or</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">cache</span><span class=\"o\">.</span><span class=\"n\">user</span>\n        <span class=\"k\">if</span> <span class=\"n\">user</span> <span class=\"ow\">and</span> <span class=\"n\">user</span><span class=\"o\">.</span><span class=\"n\">is_authenticated</span><span class=\"p\">():</span>\n            <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">cache</span><span class=\"o\">.</span><span class=\"n\">session</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">create_session</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">)</span>\n            <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">cache</span><span class=\"o\">.</span><span class=\"n\">user</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">anonymous</span><span class=\"p\">()</span>\n</div>\n<div class=\"viewcode-block\" id=\"SessionMixin.get_or_create_registration\"><a class=\"viewcode-back\" href=\"../../../../api/sessions#lux.extensions.sessions.sessionmixin.SessionMixin.get_or_create_registration\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">get_or_create_registration</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">user</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kw</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;Create a registration profile for ``user``.</span>\n\n<span class=\"sd\">        This method send an email to the user so that the email</span>\n<span class=\"sd\">        is verified once the user follows the link in the email.</span>\n\n<span class=\"sd\">        Usually called after user registration.</span>\n<span class=\"sd\">        &#39;&#39;&#39;</span>\n        <span class=\"k\">if</span> <span class=\"n\">user</span> <span class=\"ow\">and</span> <span class=\"n\">user</span><span class=\"o\">.</span><span class=\"n\">email</span><span class=\"p\">:</span>\n            <span class=\"n\">days</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">config</span><span class=\"p\">[</span><span class=\"s\">&#39;ACCOUNT_ACTIVATION_DAYS&#39;</span><span class=\"p\">]</span>\n            <span class=\"n\">expiry</span> <span class=\"o\">=</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">now</span><span class=\"p\">()</span> <span class=\"o\">+</span> <span class=\"n\">timedelta</span><span class=\"p\">(</span><span class=\"n\">days</span><span class=\"o\">=</span><span class=\"n\">days</span><span class=\"p\">)</span>\n            <span class=\"n\">auth_key</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">create_registration</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">user</span><span class=\"p\">,</span> <span class=\"n\">expiry</span><span class=\"p\">)</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">send_email_confirmation</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">user</span><span class=\"p\">,</span> <span class=\"n\">auth_key</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kw</span><span class=\"p\">)</span>\n            <span class=\"k\">return</span> <span class=\"n\">auth_key</span>\n</div>\n<div class=\"viewcode-block\" id=\"SessionMixin.send_email_confirmation\"><a class=\"viewcode-back\" href=\"../../../../api/sessions#lux.extensions.sessions.sessionmixin.SessionMixin.send_email_confirmation\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">send_email_confirmation</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">user</span><span class=\"p\">,</span> <span class=\"n\">auth_key</span><span class=\"p\">,</span>\n                                <span class=\"n\">email_subject</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">,</span> <span class=\"n\">email_message</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">,</span>\n                                <span class=\"n\">message</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;Send an email to user to confirm his/her email address&#39;&#39;&#39;</span>\n        <span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">app</span>\n        <span class=\"n\">cfg</span> <span class=\"o\">=</span> <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">config</span>\n        <span class=\"n\">ctx</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s\">&#39;auth_key&#39;</span><span class=\"p\">:</span> <span class=\"n\">auth_key</span><span class=\"p\">,</span>\n               <span class=\"s\">&#39;expiration_days&#39;</span><span class=\"p\">:</span> <span class=\"n\">cfg</span><span class=\"p\">[</span><span class=\"s\">&#39;ACCOUNT_ACTIVATION_DAYS&#39;</span><span class=\"p\">],</span>\n               <span class=\"s\">&#39;email&#39;</span><span class=\"p\">:</span> <span class=\"n\">user</span><span class=\"o\">.</span><span class=\"n\">email</span><span class=\"p\">,</span>\n               <span class=\"s\">&#39;site_uri&#39;</span><span class=\"p\">:</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">absolute_uri</span><span class=\"p\">(</span><span class=\"s\">&#39;/&#39;</span><span class=\"p\">)[:</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]}</span>\n\n        <span class=\"n\">subject</span> <span class=\"o\">=</span> <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">render_template</span><span class=\"p\">(</span>\n            <span class=\"n\">email_subject</span> <span class=\"ow\">or</span> <span class=\"s\">&#39;activation_email_subject.txt&#39;</span><span class=\"p\">,</span> <span class=\"n\">ctx</span><span class=\"p\">)</span>\n        <span class=\"c\"># Email subject *must not* contain newlines</span>\n        <span class=\"n\">subject</span> <span class=\"o\">=</span> <span class=\"s\">&#39;&#39;</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">subject</span><span class=\"o\">.</span><span class=\"n\">splitlines</span><span class=\"p\">())</span>\n        <span class=\"n\">body</span> <span class=\"o\">=</span> <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">render_template</span><span class=\"p\">(</span>\n            <span class=\"n\">email_message</span> <span class=\"ow\">or</span> <span class=\"s\">&#39;activation_email.txt&#39;</span><span class=\"p\">,</span> <span class=\"n\">ctx</span><span class=\"p\">)</span>\n        <span class=\"n\">user</span><span class=\"o\">.</span><span class=\"n\">email_user</span><span class=\"p\">(</span><span class=\"n\">subject</span><span class=\"p\">,</span> <span class=\"n\">body</span><span class=\"p\">,</span> <span class=\"n\">cfg</span><span class=\"p\">[</span><span class=\"s\">&#39;DEFAULT_FROM_EMAIL&#39;</span><span class=\"p\">])</span>\n        <span class=\"n\">message</span> <span class=\"o\">=</span> <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">render_template</span><span class=\"p\">(</span>\n            <span class=\"n\">message</span> <span class=\"ow\">or</span> <span class=\"s\">&#39;activation_message.txt&#39;</span><span class=\"p\">,</span> <span class=\"n\">ctx</span><span class=\"p\">)</span>\n        <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">cache</span><span class=\"o\">.</span><span class=\"n\">session</span><span class=\"o\">.</span><span class=\"n\">info</span><span class=\"p\">(</span><span class=\"n\">message</span><span class=\"p\">)</span>\n</div>\n    <span class=\"k\">def</span> <span class=\"nf\">decript</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">password</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"n\">password</span><span class=\"p\">:</span>\n            <span class=\"n\">p</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">crypt_module</span><span class=\"o\">.</span><span class=\"n\">decrypt</span><span class=\"p\">(</span><span class=\"n\">to_bytes</span><span class=\"p\">(</span><span class=\"n\">password</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">encoding</span><span class=\"p\">),</span>\n                                          <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">secret_key</span><span class=\"p\">)</span>\n            <span class=\"k\">return</span> <span class=\"n\">to_string</span><span class=\"p\">(</span><span class=\"n\">p</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">encoding</span><span class=\"p\">)</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"k\">return</span> <span class=\"n\">UNUSABLE_PASSWORD</span>\n\n    <span class=\"c\"># INTERNALS</span>\n    <span class=\"k\">def</span> <span class=\"nf\">_dismiss_message</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">):</span>\n        <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">response</span>\n        <span class=\"k\">if</span> <span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">content_type</span> <span class=\"ow\">in</span> <span class=\"n\">lux</span><span class=\"o\">.</span><span class=\"n\">JSON_CONTENT_TYPES</span><span class=\"p\">:</span>\n            <span class=\"n\">session</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">cache</span><span class=\"o\">.</span><span class=\"n\">session</span>\n            <span class=\"n\">form</span> <span class=\"o\">=</span> <span class=\"n\">Form</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"o\">=</span><span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">body_data</span><span class=\"p\">())</span>\n            <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">rawdata</span><span class=\"p\">[</span><span class=\"s\">&#39;message&#39;</span><span class=\"p\">]</span>\n            <span class=\"n\">body</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s\">&#39;success&#39;</span><span class=\"p\">:</span> <span class=\"n\">session</span><span class=\"o\">.</span><span class=\"n\">remove_message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">)}</span>\n            <span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">content</span> <span class=\"o\">=</span> <span class=\"n\">json</span><span class=\"o\">.</span><span class=\"n\">dumps</span><span class=\"p\">(</span><span class=\"n\">body</span><span class=\"p\">)</span>\n            <span class=\"k\">return</span> <span class=\"n\">response</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">_encript</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">password</span><span class=\"p\">):</span>\n        <span class=\"n\">p</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">crypt_module</span><span class=\"o\">.</span><span class=\"n\">encrypt</span><span class=\"p\">(</span><span class=\"n\">to_bytes</span><span class=\"p\">(</span><span class=\"n\">password</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">encoding</span><span class=\"p\">),</span>\n                                      <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">secret_key</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">salt_size</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">to_string</span><span class=\"p\">(</span><span class=\"n\">p</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">encoding</span><span class=\"p\">)</span></div>\n</pre></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class='small hidden-print text-muted' id='page-footer'>\n    <div class='container'>\n        <div class='row'>\n            <div class='block col-sm-5'>\n                <div class='hidden-xs'>\n                    <ul class=\"fa-ul text-left\">\n    <li><i class=\"fa-li fa fa-copyright\"></i>2014 <a href=\"http://quantmind.com\">Quantmind</a></li>\n    <li>Site build with Lux on python 3.4.2</li>\n    <li>Docs build with <a href=\"http://sphinx-doc.org/\" target=\"_blank\">Sphinx</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/changelog\">Changelog</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/api/\">API</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/EXTENSIONS/\">Extensions</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/images\">Images</a></li>\n</ul>\n                </div>\n                <div class='text-center visible-xs'>\n                    <ul class=\"fa-ul text-left\">\n    <li><i class=\"fa-li fa fa-copyright\"></i>2014 <a href=\"http://quantmind.com\">Quantmind</a></li>\n    <li>Site build with Lux on python 3.4.2</li>\n    <li>Docs build with <a href=\"http://sphinx-doc.org/\" target=\"_blank\">Sphinx</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/changelog\">Changelog</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/api/\">API</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/EXTENSIONS/\">Extensions</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/images\">Images</a></li>\n</ul>\n                </div>\n            </div>\n            <div class='block col-sm-2 text-center'>\n                <div class='hidden-xs'>\n                    <p><a href='#top' title=\"Lux\" class=\"hover-opacity\">\n    <img height=50 title='Lux' src='http://quantmind.github.io/lux/media/luxsite/lux.png' alt='Lux'>\n</a></p>\n                </div>\n                <div class='visible-xs'>\n                    <p><a href='https://twitter.com/quantmind' title='Follow quantmind on twitter'>\n<i class='fa fa-twitter fa-2x'></i></a>\n<a href='https://plus.google.com/+QuantmindPlus' title='Follow quantmind on google+'>\n<i class='fa fa-google-plus-square fa-2x'></i></a>\n<a href='https://www.facebook.com/quantmind' title='Follow quantmind on facebook'>\n<i class='fa fa-facebook-square fa-2x'></i></a>\n<a href='https://github.com/quantmind/lux' title='Lux on github'>\n<i class='fa fa-github fa-2x'></i></a></p>\n                </div>\n            </div>\n            <div class='block col-sm-5'>\n                <div class='text-right hidden-xs'>\n                    <p><a href='https://twitter.com/quantmind' title='Follow quantmind on twitter'>\n<i class='fa fa-twitter fa-2x'></i></a>\n<a href='https://plus.google.com/+QuantmindPlus' title='Follow quantmind on google+'>\n<i class='fa fa-google-plus-square fa-2x'></i></a>\n<a href='https://www.facebook.com/quantmind' title='Follow quantmind on facebook'>\n<i class='fa fa-facebook-square fa-2x'></i></a>\n<a href='https://github.com/quantmind/lux' title='Lux on github'>\n<i class='fa fa-github fa-2x'></i></a></p>\n                </div>\n                <div class='text-center visible-xs'>\n                    <p><a href='#top' title=\"Lux\" class=\"hover-opacity\">\n    <img height=50 title='Lux' src='http://quantmind.github.io/lux/media/luxsite/lux.png' alt='Lux'>\n</a></p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>"}}