{"html": {"main": "<section id=\"page-header\" class=\"page-header-outer tutorials_extensions-header\">\n    <div class=\"layer\">\n        <div class=\"page-header\">\n            <div class=\"container fullpage\">\n                <div class=\"row fullpage\">\n                    <div class=\"col-sm-12 text-center\">\n                        <breadcrumbs></breadcrumbs>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</section>\n\n<div id=\"page-main\">\n    <div class=\"container\">\n        <div class=\"row\">\n            <div class=\"tutorials_extensions-main col-md-12\">\n                <div class=\"center-block\" style=\"max-width: 900px\" data-highlight data-hash-scroll>\n                    <span class=\"target\" id=\"module-lux.core\"><span id=\"writing-extensions\"></span></span><div class=\"section\" id=\"id1\">\n<h1>Writing Extensions<a class=\"headerlink\" href=\"#id1\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>Extension are implemented by subclassing the <a class=\"reference internal\" href=\"../api/api#lux.extensions.api.Extension\" title=\"lux.extensions.api.Extension\"><tt class=\"xref py py-class docutils literal\"><span class=\"pre\">Extension</span></tt></a> class:</p>\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"kn\">import</span> <span class=\"nn\">lux</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">MyExtension</span><span class=\"p\">(</span><span class=\"n\">lux</span><span class=\"o\">.</span><span class=\"n\">Extension</span><span class=\"p\">):</span>\n    <span class=\"c\"># Optional version number</span>\n    <span class=\"n\">_version</span> <span class=\"o\">=</span> <span class=\"s\">&#39;0.1.0&#39;</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">middleware</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">app</span><span class=\"p\">):</span>\n        <span class=\"o\">...</span>\n</pre></div>\n</div>\n<p>The <a class=\"reference internal\" href=\"../api/api#lux.extensions.api.Extension.middleware\" title=\"lux.extensions.api.Extension.middleware\"><tt class=\"xref py py-meth docutils literal\"><span class=\"pre\">Extension.middleware()</span></tt></a> method is called once only\nby the <tt class=\"xref py py-class docutils literal\"><span class=\"pre\">App</span></tt> serving the web applications, and it must return an iterable over\n<a class=\"reference external\" href=\"http://www.python.org/dev/peps/pep-3333/\">WSGI</a> middleware or <tt class=\"docutils literal\"><span class=\"pre\">None</span></tt>.</p>\n<div class=\"section\" id=\"events\">\n<h2>Events<a class=\"headerlink\" href=\"#events\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>An <a class=\"reference internal\" href=\"../api/api#lux.extensions.api.Extension\" title=\"lux.extensions.api.Extension\"><tt class=\"xref py py-class docutils literal\"><span class=\"pre\">Extension</span></tt></a> can register several callbacks which are invoked at different\npoints during the application live-span. These callbacks receive as\nfirst positional argument, the <tt class=\"xref py py-class docutils literal\"><span class=\"pre\">App</span></tt> instance running the web site\nand are implemented by adding some of the following methods to your\nextension class:</p>\n<div class=\"section\" id=\"on-config\">\n<span id=\"event-on-config\"></span><h3>on_config<a class=\"headerlink\" href=\"#on-config\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<dl class=\"method\">\n<dt id=\"lux.core.Extension.on_config\">\n<tt class=\"descclassname\">Extension.</tt><tt class=\"descname\">on_config</tt><big>(</big><em>self</em>, <em>app</em><big>)</big><a class=\"headerlink\" href=\"#lux.core.Extension.on_config\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<p>This is the first event to be fired. It is executed once only after the\n<tt class=\"xref py py-attr docutils literal\"><span class=\"pre\">App.config</span></tt> dictionary has been loaded from\nthe setting file. This is a chance to perform post processing on\nparameters before the wsgi <tt class=\"xref py py-attr docutils literal\"><span class=\"pre\">App.handler</span></tt> is loaded.</p>\n</div>\n<div class=\"section\" id=\"on-loaded\">\n<span id=\"event-on-loaded\"></span><h3>on_loaded<a class=\"headerlink\" href=\"#on-loaded\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<dl class=\"method\">\n<dt id=\"lux.core.Extension.on_loaded\">\n<tt class=\"descclassname\">Extension.</tt><tt class=\"descname\">on_loaded</tt><big>(</big><em>self</em>, <em>app</em>, <em>handler</em><big>)</big><a class=\"headerlink\" href=\"#lux.core.Extension.on_loaded\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<p>Called once only when all <a class=\"reference internal\" href=\"../api/api#lux.extensions.api.Extension\" title=\"lux.extensions.api.Extension\"><tt class=\"xref py py-class docutils literal\"><span class=\"pre\">Extension</span></tt></a> have loaded their\n<a class=\"reference internal\" href=\"../api/api#lux.extensions.api.Extension.middleware\" title=\"lux.extensions.api.Extension.middleware\"><tt class=\"xref py py-meth docutils literal\"><span class=\"pre\">middleware()</span></tt></a> into\nthe WSGI <tt class=\"docutils literal\"><span class=\"pre\">handler</span></tt>. A chance to add additional middleware or perform\nany sort of post-processing on the wsgi application <tt class=\"docutils literal\"><span class=\"pre\">handler</span></tt>.</p>\n</div>\n<div class=\"section\" id=\"on-start\">\n<span id=\"event-on-start\"></span><h3>on_start<a class=\"headerlink\" href=\"#on-start\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<dl class=\"method\">\n<dt id=\"lux.core.Extension.on_start\">\n<tt class=\"descclassname\">Extension.</tt><tt class=\"descname\">on_start</tt><big>(</big><em>self</em>, <em>app</em>, <em>server</em><big>)</big><a class=\"headerlink\" href=\"#lux.core.Extension.on_start\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<p>Called once only just before the pulsar <tt class=\"docutils literal\"><span class=\"pre\">server</span></tt> is about to start serving\nthe <tt class=\"docutils literal\"><span class=\"pre\">app</span></tt>.</p>\n</div>\n<div class=\"section\" id=\"on-request\">\n<span id=\"event-on-request\"></span><h3>on_request<a class=\"headerlink\" href=\"#on-request\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<dl class=\"method\">\n<dt id=\"lux.core.Extension.on_request\">\n<tt class=\"descclassname\">Extension.</tt><tt class=\"descname\">on_request</tt><big>(</big><em>self</em>, <em>app</em>, <em>request</em><big>)</big><a class=\"headerlink\" href=\"#lux.core.Extension.on_request\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<p>Called when a new <tt class=\"docutils literal\"><span class=\"pre\">request</span></tt> is received by the <tt class=\"xref py py-class docutils literal\"><span class=\"pre\">App</span></tt> instance. This\nevent occurs before the application loops through the WSGI middleware\nto produce the response.</p>\n</div>\n<div class=\"section\" id=\"on-html-document\">\n<span id=\"event-on-html-document\"></span><h3>on_html_document<a class=\"headerlink\" href=\"#on-html-document\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<dl class=\"method\">\n<dt id=\"lux.core.Extension.on_html_document\">\n<tt class=\"descclassname\">Extension.</tt><tt class=\"descname\">on_html_document</tt><big>(</big><em>self</em>, <em>app</em>, <em>request</em>, <em>doc</em><big>)</big><a class=\"headerlink\" href=\"#lux.core.Extension.on_html_document\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<p>Called the first time the <tt class=\"docutils literal\"><span class=\"pre\">request.html_document</span></tt> attribute is accessed.\nA chance to add static data or any other Html specific information.</p>\n</div>\n<div class=\"section\" id=\"on-form\">\n<span id=\"event-on-form\"></span><h3>on_form<a class=\"headerlink\" href=\"#on-form\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<dl class=\"method\">\n<dt id=\"lux.core.Extension.on_form\">\n<tt class=\"descclassname\">Extension.</tt><tt class=\"descname\">on_form</tt><big>(</big><em>self</em>, <em>app</em>, <em>form</em><big>)</big><a class=\"headerlink\" href=\"#lux.core.Extension.on_form\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n</div>\n<div class=\"section\" id=\"on-html-response\">\n<span id=\"event-response\"></span><h3>on_html_response<a class=\"headerlink\" href=\"#on-html-response\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<dl class=\"method\">\n<dt id=\"lux.core.Extension.on_html_response\">\n<tt class=\"descclassname\">Extension.</tt><tt class=\"descname\">on_html_response</tt><big>(</big><em>self</em>, <em>app</em>, <em>request</em>, <em>html</em><big>)</big><a class=\"headerlink\" href=\"#lux.core.Extension.on_html_response\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<p>Called by the <tt class=\"xref py py-class docutils literal\"><span class=\"pre\">Html.html_response</span></tt> method. The <tt class=\"docutils literal\"><span class=\"pre\">html</span></tt> input\nis a dictionary containing the <tt class=\"docutils literal\"><span class=\"pre\">body</span></tt> keys with the html element\nwhich is being rendered in the body part of the Html page.</p>\n<blockquote>\n<div></div></blockquote>\n</div>\n</div>\n</div>\n\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class='small hidden-print text-muted' id='page-footer'>\n    <div class='container'>\n        <div class='row'>\n            <div class='block col-sm-5'>\n                <div class='hidden-xs'>\n                    <ul class=\"fa-ul text-left\">\n    <li><i class=\"fa-li fa fa-copyright\"></i>2014 <a href=\"http://quantmind.com\">Quantmind</a></li>\n    <li>Site build with Lux on python 3.4.1</li>\n    <li>Docs build with <a href=\"http://sphinx-doc.org/\" target=\"_blank\">Sphinx</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/changelog\">Changelog</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/api/\">API</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/EXTENSIONS/\">Extensions</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/images\">Images</a></li>\n</ul>\n                </div>\n                <div class='text-center visible-xs'>\n                    <ul class=\"fa-ul text-left\">\n    <li><i class=\"fa-li fa fa-copyright\"></i>2014 <a href=\"http://quantmind.com\">Quantmind</a></li>\n    <li>Site build with Lux on python 3.4.1</li>\n    <li>Docs build with <a href=\"http://sphinx-doc.org/\" target=\"_blank\">Sphinx</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/changelog\">Changelog</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/api/\">API</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/EXTENSIONS/\">Extensions</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/images\">Images</a></li>\n</ul>\n                </div>\n            </div>\n            <div class='block col-sm-2 text-center'>\n                <div class='hidden-xs'>\n                    <p><a href='#top' title=\"Lux\" class=\"hover-opacity\">\n    <img height=50 title='Lux' src='http://quantmind.github.io/lux/media/luxsite/lux.png' alt='Lux'>\n</a></p>\n                </div>\n                <div class='visible-xs'>\n                    <p><a href='https://twitter.com/quantmind' title='Follow quantmind on twitter'>\n<i class='fa fa-twitter fa-2x'></i></a>\n<a href='https://plus.google.com/+QuantmindPlus' title='Follow quantmind on google+'>\n<i class='fa fa-google-plus-square fa-2x'></i></a>\n<a href='https://www.facebook.com/quantmind' title='Follow quantmind on facebook'>\n<i class='fa fa-facebook-square fa-2x'></i></a>\n<a href='https://github.com/quantmind/lux' title='Lux on github'>\n<i class='fa fa-github fa-2x'></i></a></p>\n                </div>\n            </div>\n            <div class='block col-sm-5'>\n                <div class='text-right hidden-xs'>\n                    <p><a href='https://twitter.com/quantmind' title='Follow quantmind on twitter'>\n<i class='fa fa-twitter fa-2x'></i></a>\n<a href='https://plus.google.com/+QuantmindPlus' title='Follow quantmind on google+'>\n<i class='fa fa-google-plus-square fa-2x'></i></a>\n<a href='https://www.facebook.com/quantmind' title='Follow quantmind on facebook'>\n<i class='fa fa-facebook-square fa-2x'></i></a>\n<a href='https://github.com/quantmind/lux' title='Lux on github'>\n<i class='fa fa-github fa-2x'></i></a></p>\n                </div>\n                <div class='text-center visible-xs'>\n                    <p><a href='#top' title=\"Lux\" class=\"hover-opacity\">\n    <img height=50 title='Lux' src='http://quantmind.github.io/lux/media/luxsite/lux.png' alt='Lux'>\n</a></p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>"}, "head": {}, "html_url": "http://quantmind.github.io/lux/docs/tutorials/extensions", "name": "tutorials_extensions", "content_type": "text/html", "api_url": "http://quantmind.github.io/lux/jsonapi/docs/tutorials/extensions", "modified": "2014-10-13T13:25:01", "site": {"lux_version": "0.1.1-alpha.1", "date": "2014-10-22T13-18-02", "name": "Lux", "python_version": "3.4.1", "url": "http://quantmind.github.io/lux", "media": "/media", "year": 2014, "template": "doc.html", "template_engine": null}, "slug": "tutorials/extensions"}